var koara={};"undefined"==typeof exports||exports.nodeType||("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=koara),exports.koara=koara),koara.Node=function(){this.children=[],this.value=""},koara.Node.prototype={constructor:koara.Node,add:function(t,s){this.children.push(t)},childrenAccept:function(t){for(var s=0;s<this.children.length;s++)this.children[s].accept(t)}},koara.Document=function(){},koara.Document.prototype=new koara.Node,koara.Document.prototype={constructor:koara.Document,accept:function(t){t.visitDocument(this)}},koara.BlockElement=function(){},koara.BlockElement.prototype=new koara.Node,koara.BlockElement.prototype.constructor=koara.BlockElement,koara.BlockElement.prototype.isNested=function(){return!(this.parent instanceof koara.Document)},koara.BlockElement.prototype.isSingleChild=function(){return 1==this.parent.children.length},koara.BlockElement.prototype.accept=function(t){t.visit(this)},koara.BlockQuote=function(){},koara.BlockQuote.prototype=new koara.BlockElement,koara.BlockQuote.prototype={constructor:koara.BlockQuote,accept:function(t){t.visit(this)}},koara.Code=function(){},koara.Code.prototype=new koara.Node,koara.Code.prototype={constructor:koara.Code,accept:function(t){t.visit(this)}},koara.CodeBlock=function(){},koara.CodeBlock.prototype=new koara.BlockElement,koara.CodeBlock.prototype={constructor:koara.CodeBlock,accept:function(t){t.visit(this)}},koara.Em=function(){},koara.Em.prototype=new koara.Node,koara.Em.prototype={constructor:koara.Em,accept:function(t){t.visit(this)}},koara.Heading=function(){},koara.Heading.prototype=new koara.BlockElement,koara.Heading.prototype={constructor:koara.Heading,accept:function(t){t.visit(this)}},koara.Image=function(){},koara.Image.prototype=new koara.Node,koara.Image.prototype={constructor:koara.Image,accept:function(t){t.visit(this)}},koara.LineBreak=function(){},koara.LineBreak.prototype=new koara.Node,koara.LineBreak.prototype={constructor:koara.LineBreak,accept:function(t){t.visit(this)}},koara.Link=function(){},koara.Link.prototype=new koara.Node,koara.Link.prototype={constructor:koara.Link,accept:function(t){t.visit(this)}},koara.ListBlock=function(){},koara.ListBlock.prototype=new koara.BlockElement,koara.ListBlock.prototype={constructor:koara.ListBlock,accept:function(t){t.visit(this)}},koara.ListItem=function(){},koara.ListItem.prototype=new koara.Node,koara.ListItem.prototype={constructor:koara.ListItem,accept:function(t){t.visit(this)}},koara.Paragraph=function(){},koara.Paragraph.prototype=new koara.BlockElement,koara.Paragraph.prototype.constructor=koara.Paragraph,koara.Paragraph.prototype.accept=function(t){t.visitParagraph(this)},koara.Strong=function(){},koara.Strong.prototype=new koara.Node,koara.Strong.prototype={constructor:koara.Strong,accept:function(t){t.visit(this)}},koara.Text=function(){},koara.Text.prototype=new koara.Node,koara.Text.prototype.constructor=koara.Text,koara.Text.prototype.accept=function(t){t.visitText(this)},koara.StringReader=function(t){this.index=0,this.text=t},koara.StringReader.prototype={constructor:koara.StringReader,read:function(t,s,i){if(this.text.toString().substring(this.index).length>0){for(var e=0,n=0;i>n;n++){var o=this.index+n,h=this.text.toString().substring(o,o+1);""!==h&&(t[s+n]=h,e++)}return this.index+=i,e}return-1}},koara.Html5Renderer=function(){this.level=0},koara.Html5Renderer.prototype={constructor:koara.Html5Renderer,visitDocument:function(t){this.output="",t.childrenAccept(this)},visitParagraph:function(t){t.isNested()&&t.getParent()instanceof ListItem&&t.isSingleChild()?t.childrenAccept(this):(this.output+=this.indent()+"<p>",t.childrenAccept(this),this.output+="</p>\n",t.isNested()||(this.output+="\n"))},visitText:function(t){this.output+=t.value},indent:function(){for(var t=2*this.level,s=[],i=t-1;i>=0;i--)s.push(" ");return new String(s)}},koara.CharStream=function(t){this.available=4096,this.bufsize=4096,this.tokenBegin=0,this.bufcolumn=[],this.bufpos=-1,this.bufline=[],this.column=0,this.line=1,this.prevCharIsLF,this.reader=t,this.buffer=[],this.maxNextCharInd=0,this.inBuf=0,this.tabSize=4},koara.CharStream.prototype={constructor:koara.CharStream,beginToken:function(){this.tokenBegin=-1;var t=this.readChar();return this.tokenBegin=this.bufpos,t},readChar:function(){if(this.inBuf>0)return--this.inBuf,++this.bufpos==this.bufsize&&(this.bufpos=0),this.buffer[this.bufpos];++this.bufpos>=this.maxNextCharInd&&this.fillBuff();var t=this.buffer[this.bufpos];return this.updateLineColumn(t),t},fillBuff:function(){this.maxNextCharInd==this.available&&(this.available==this.bufsize?(this.bufpos=0,this.maxNextCharInd=0,this.tokenBegin>2048&&(this.available=this.tokenBegin)):this.available=this.bufsize);var t=0;try{if(-1==(t=this.reader.read(this.buffer,this.maxNextCharInd,this.available-this.maxNextCharInd)))throw new Error("IOException");this.maxNextCharInd+=t}catch(s){throw--this.bufpos,this.backup(0),-1==this.tokenBegin&&(this.tokenBegin=this.bufpos),s}},backup:function(t){this.inBuf+=t,(this.bufpos-=t)<0&&(this.bufpos+=this.bufsize)},updateLineColumn:function(t){switch(this.column++,this.prevCharIsLF&&(this.prevCharIsLF=!1,this.column=1,this.line+=this.column),t){case"\n":this.prevCharIsLF=!0;break;case"	":this.column--,this.column+=this.tabSize-this.column%this.tabSize}this.bufline[this.bufpos]=this.line,this.bufcolumn[this.bufpos]=this.column},getImage:function(){return this.bufpos>=this.tokenBegin?this.buffer.slice(this.tokenBegin,this.bufpos-this.tokenBegin+1).join(""):this.buffer.slice(this.tokenBegin,this.bufsize-this.tokenBegin).join("")+this.buffer.slice(0,this.bufpos+1).join("")},getBeginColumn:function(){return this.bufpos in this.bufcolumn?this.bufcolumn[this.bufpos]:0},getBeginLine:function(){return this.bufpos in this.bufline?this.bufline[this.bufpos]:0},getEndColumn:function(){return this.tokenBegin in this.bufcolumn?this.bufcolumn[this.tokenBegin]:0},getEndLine:function(){return this.tokenBegin in this.bufline?this.bufline[this.tokenBegin]:0}},koara.LookaheadSuccess=function(){},koara.LookaheadSuccess.prototype={constructor:koara.LookaheadSuccess},koara.Parser=function(){this.lookAheadSuccess=new koara.LookaheadSuccess,this.modules=["paragraphs","headings","lists","links","images","formatting","blockquotes","code"]},koara.Parser.prototype={constructor:koara.Parser,parse:function(t){return this.parseReader(new koara.StringReader(t))},parseReader:function(t){for(this.cs=new koara.CharStream(t),this.tm=new koara.TokenManager(this.cs),this.token=new koara.Token,this.tree=new koara.TreeState,this.nextTokenKind=-1,document=new koara.Document,this.tree.openScope();this.getNextTokenKind()==this.tm.EOL;)this.consumeToken(this.tm.EOL);if(this.whiteSpace(),this.hasAnyBlockElementsAhead()){for(this.blockElement();this.blockAhead(0);){for(;this.getNextTokenKind()==this.tm.EOL;)this.consumeToken(this.tm.EOL),this.whiteSpace();this.blockElement()}for(;this.getNextTokenKind()==this.tm.EOL;)this.consumeToken(this.tm.EOL);this.whiteSpace()}return this.consumeToken(this.tm.EOF),this.tree.closeScope(document),document},blockElement:function(){this.currentBlockLevel++,this.modules.indexOf("headings")>=0&&this.headingAhead(1)?this.heading():this.modules.indexOf("blockquotes")>=0&&this.getNextTokenKind()==this.tm.GT?this.blockQuote():this.modules.indexOf("lists")>=0&&this.getNextTokenKind()==this.tm.DASH?this.unorderedList():this.modules.indexOf("lists")>=0&&this.hasOrderedListAhead()?this.orderedList():this.modules.indexOf("code")>=0&&this.hasFencedCodeBlockAhead()?this.fencedCodeBlock():this.paragraph(),this.currentBlockLevel--},heading:function(){var t=new koara.Heading;this.tree.openScope();for(var s=0;this.getNextTokenKind()==this.tm.EQ;)this.consumeToken(this.tm.EQ),s++;for(this.whiteSpace();this.headingHasInlineElementsAhead();)this.hasTextAhead()?this.text():this.modules.indexOf("images")>=0&&this.hasImageAhead()?this.image():this.modules.indexOf("links")>=0&&this.hasLinkAhead()?this.link():this.modules.indexOf("formatting")>=0&&this.hasStrongAhead()?this.strong():this.modules.indexOf("formatting")>=0&&this.hasEmAhead()?this.em():this.modules.indexOf("code")>=0&&this.hasCodeAhead()?this.code():this.looseChar();t.value=s,this.tree.closeScope(t)},blockQuote:function(){var t=new koara.BlockQuote;for(this.tree.openScope(),this.currentQuoteLevel++,this.consumeToken(this.tm.GT);this.blockQuoteHasEmptyLineAhead();)this.blockQuoteEmptyLine();if(this.whiteSpace(),this.blockQuoteHasAnyBlockElementseAhead())for(this.blockElement();this.blockAhead(0);){for(;this.getNextTokenKind()==this.tm.EOL;)this.consumeToken(EOL),this.whiteSpace(),this.blockQuotePrefix();this.blockElement()}for(;this.hasBlockQuoteEmptyLinesAhead();)this.blockQuoteEmptyLine();this.currentQuoteLevel--,tree.closeScope(t)},blockQuotePrefix:function(){var t=0;do consumeToken(this.tm.GT),this.whiteSpace();while(++t<this.currentQuoteLevel)},blockQuoteEmptyLine:function(){this.consumeToken(this.tm.EOL),this.whiteSpace();do this.consumeToken(this.tm.GT),this.whiteSpace();while(this.getNextTokenKind()==this.tm.GT)},unorderedList:function(){var t=new koara.ListBlock(!1);for(this.tree.openScope(),listBeginColumn=this.unorderedListItem();this.listItemAhead(this.listBeginColumn,!1);){for(;this.getNextTokenKind()==this.tm.EOL;)this.consumeToken(this.tm.EOL);this.whiteSpace(),this.currentQuoteLevel>0&&this.blockQuotePrefix(),this.unorderedListItem()}this.tree.closeScope(t)},unorderedListItem:function(){var t=new ListItem;this.tree.openScope();var s=consumeToken(this.tm.DASH);if(this.whiteSpace(),this.listItemHasInlineElements())for(this.blockElement();this.blockAhead(s.beginColumn);){for(;this.getNextTokenKind()==this.tm.EOL;)this.consumeToken(this.tm.EOL),this.whiteSpace(),this.currentQuoteLevel>0&&this.blockQuotePrefix();blockElement()}return this.tree.closeScope(t),s.beginColumn},orderedList:function(){var t=new koara.ListBlock(!0);this.tree.openScope();for(var s=this.orderedListItem();this.listItemAhead(s,!0);){for(;this.getNextTokenKind()==this.tm.EOL;)this.consumeToken(this.tm.EOL);this.whiteSpace(),this.currentQuoteLevel>0&&this.blockQuotePrefix(),this.orderedListItem()}this.tree.closeScope(t)},orderedListItem:function(){var t=new koara.ListItem;this.tree.openScope();var s=this.consumeToken(this.tm.DIGITS);if(this.consumeToken(this.tm.DOT),this.whiteSpace(),this.listItemHasInlineElements())for(this.blockElement();this.blockAhead(s.beginColumn);){for(;this.getNextTokenKind()==this.tm.EOL;)this.consumeToken(this.tm.EOL),this.whiteSpace(),this.currentQuoteLevel>0&&this.blockQuotePrefix();this.blockElement()}return t.number=s.image,tree.closeScope(t),s.beginColumn},fencedCodeBlock:function(){var t=new CodeBlock;this.tree.openScope();var s="";this.consumeToken(this.tm.BACKTICK).beginColumn;do this.consumeToken(BACKTICK);while(this.getNextTokenKind()==this.tm.BACKTICK);for(this.whiteSpace(),this.getNextTokenKind()==this.tm.CHAR_SEQUENCE&&(this.codeBlock.language=this.codeLanguage()),this.getNextTokenKind()==this.tm.EOF||this.fencesAhead()||(this.consumeToken(this.tm.EOL),this.levelWhiteSpace(this.beginColumn));this.getNextTokenKind()!=this.tm.EOF&&(this.getNextTokenKind()!=this.tm.EOL||!this.fencesAhead());)switch(this.getNextTokenKind()){case this.tm.CHAR_SEQUENCE:s+=this.consumeToken(this.tm.CHAR_SEQUENCE).image;break;case this.tm.ASTERISK:s+=this.consumeToken(this.tm.ASTERISK).image;break;case this.tm.BACKSLASH:s+=this.consumeToken(this.tm.BACKSLASH).image;break;case this.tm.COLON:s+=this.consumeToken(this.tm.COLON).image;break;case this.tm.DASH:s+=this.consumeToken(this.tm.DASH).image;break;case this.tm.DIGITS:s+=this.consumeToken(this.tm.DIGITS).image;break;case this.tm.DOT:s+=this.consumeToken(this.tm.DOT).image;break;case this.tm.EQ:s+=this.consumeToken(this.tm.EQ).image;break;case this.tm.ESCAPED_CHAR:s+=this.consumeToken(this.tm.ESCAPED_CHAR).image;break;case this.tm.IMAGE_LABEL:s+=this.consumeToken(this.tm.IMAGE_LABEL).image;break;case this.tm.LT:s+=this.consumeToken(this.tm.LT).image;break;case this.tm.GT:s+=this.consumeToken(this.tm.GT).image;break;case this.tm.LBRACK:s+=this.consumeToken(this.tm.LBRACK).image;break;case this.tm.RBRACK:s+=this.consumeToken(this.tm.RBRACK).image;break;case this.tm.LPAREN:s+=this.consumeToken(this.tm.LPAREN).image;break;case this.tm.RPAREN:s+=this.consumeToken(this.tm.RPAREN).image;break;case this.tm.UNDERSCORE:s+=this.consumeToken(this.tm.UNDERSCORE).image;break;case this.tm.BACKTICK:s+=this.consumeToken(this.tm.BACKTICK).image;break;default:if(this.nextAfterSpace([this.tm.EOL,this.tm.EOF]))this.fencesAhead()||(this.consumeToken(this.tm.EOL),s+="\n",this.levelWhiteSpace(this.beginColumn));else switch(this.getNextTokenKind()){case this.tm.SPACE:s+=this.consumeToken(this.tm.SPACE).image;break;case this.tm.TAB:consumeToken(this.tm.TAB),s+="    "}}if(this.fencesAhead())for(this.consumeToken(this.tm.EOL),this.whiteSpace();this.getNextTokenKind()==this.tm.BACKTICK;)this.consumeToken(BACKTICK);t.setValue(s.toString()),tree.closeScope(t)},paragraph:function(){var t;for(t=this.modules.indexOf("paragraphs")>=0?new koara.Paragraph:new koara.BlockElement,this.tree.openScope(),this.inline();this.textAhead();){if(this.lineBreak(),this.whiteSpace(),this.modules.indexOf("blockquotes")>=0)for(;this.getNextTokenKind()==this.tm.GT;)this.consumeToken(this.tm.GT),this.whiteSpace();this.inline()}this.tree.closeScope(t)},text:function(){var t=new koara.Text;this.tree.openScope();for(var s="";this.textHasTokensAhead();)switch(this.getNextTokenKind()){case this.tm.CHAR_SEQUENCE:s+=this.consumeToken(this.tm.CHAR_SEQUENCE).image;break;case this.tm.BACKSLASH:s+=this.consumeToken(this.tm.BACKSLASH).image;break;case this.tm.COLON:s+=this.consumeToken(this.tm.COLON).image;break;case this.tm.DASH:s+=this.consumeToken(this.tm.DASH).image;break;case this.tm.DIGITS:s+=this.consumeToken(this.tm.DIGITS).image;break;case this.tm.DOT:s+=this.consumeToken(this.tm.DOT).image;break;case this.tm.EQ:s+=this.consumeToken(this.tm.EQ).image;break;case this.tm.ESCAPED_CHAR:s+=this.consumeToken(this.tm.ESCAPED_CHAR).image.substring(1);break;case this.tm.GT:s+=this.consumeToken(this.tm.GT).image;break;case this.tm.IMAGE_LABEL:s+=this.consumeToken(this.tm.IMAGE_LABEL).image;break;case this.tm.LPAREN:s+=this.consumeToken(this.tm.LPAREN).image;break;case this.tm.LT:s+=this.consumeToken(this.tm.LT).image;break;case this.tm.RBRACK:s+=consumeToken(this.tm.RBRACK).image;break;case this.tm.RPAREN:s+=consumeToken(RPAREN).image;break;default:if(!this.nextAfterSpace([this.tm.EOL,this.tm.EOF]))switch(this.getNextTokenKind()){case this.tm.SPACE:s+=this.consumeToken(this.tm.SPACE).image;break;case this.tm.TAB:this.consumeToken(this.tm.TAB),s+="    "}}t.value=s,this.tree.closeScope(t)},image:function(){var t=new koara.Image;this.tree.openScope();var s="";for(this.consumeToken(this.tm.LBRACK),this.whiteSpace(),this.consumeToken(this.tm.IMAGE_LABEL),this.whiteSpace();this.imageHasAnyElements();)this.hasTextAhead()?this.resourceText():this.looseChar();this.whiteSpace(),this.consumeToken(this.tm.RBRACK),this.hasResourceUrlAhead()&&(s=this.resourceUrl()),t.value=s,this.tree.closeScope(t)},link:function(){var t=new Link;this.tree.openScope();var s="";for(this.consumeToken(this.tm.LBRACK),this.whiteSpace();this.linkHasAnyElements();)this.modules.indexOf("images")>=0&&this.hasImageAhead()?this.image():this.modules.indexOf("formatting")>=0&&this.hasStrongAhead()?this.strong():this.modules.indexOf("formatting")>=0&&this.hasEmAhead()?this.em():this.modules.indexOf("code")>=0&&this.hasCodeAhead()?this.code():this.hasResourceTextAhead()?this.resourceText():this.looseChar();this.whiteSpace(),this.consumeToken(this.tm.RBRACK),this.hasResourceUrlAhead()&&(s=this.resourceUrl()),t.value=s,tree.closeScope(t)},strong:function(){var t=new koara.Strong;for(this.tree.openScope(),this.consumeToken(this.tm.ASTERISK);this.strongHasElements();)if(this.hasTextAhead())this.text();else if(this.modules.indexOf("images")>=0&&this.hasImage())this.image();else if(this.modules.indexOf("links")>=0&&this.hasLinkAhead())this.link();else if(this.modules.indexOf("code")>=0&&this.multilineAhead(this.tm.BACKTICK))this.codeMultiline();else if(this.strongEmWithinStrongAhead())this.emWithinStrong();else switch(this.getNextTokenKind()){case this.tm.BACKTICK:this.tree.addSingleValue(new koara.Text,this.consumeToken(this.tm.BACKTICK));break;case this.tm.LBRACK:this.tree.addSingleValue(new koara.Text,this.consumeToken(this.tm.LBRACK));break;case this.tm.UNDERSCORE:this.tree.addSingleValue(new koara.Text,this.consumeToken(this.tm.UNDERSCORE))}this.consumeToken(this.tm.ASTERISK),this.tree.closeScope(t)},em:function(){var t=new Em;for(this.tree.openScope(),this.consumeToken(this.tm.UNDERSCORE);this.emHasElements();)if(this.hasTextAhead())this.text();else if(this.modules.indexOf("images")>=0&&this.hasImage())this.image();else if(this.modules.indexOf("links")>=0&&this.hasLinkAhead())this.link();else if(this.modules.indexOf("code")>=0&&this.hasCodeAhead())this.code();else if(this.emHasStrongWithinEm())this.strongWithinEm();else switch(this.getNextTokenKind()){case this.tm.ASTERISK:this.tree.addSingleValue(new koara.Text,this.consumeToken(this.tm.ASTERISK));break;case this.tm.BACKTICK:this.tree.addSingleValue(new koara.Text,this.consumeToken(this.tm.BACKTICK));break;case this.tm.LBRACK:tree.addSingleValue(new koara.Text,this.consumeToken(this.tm.LBRACK))}this.consumeToken(this.tm.UNDERSCORE),this.tree.closeScope(t)},code:function(){var t=new Code;this.tree.openScope(),this.consumeToken(this.tm.BACKTICK),this.codeText(),this.consumeToken(this.tm.BACKTICK),this.tree.closeScope(t)},codeText:function(){var t=new Text;this.tree.openScope();var s="";do switch(this.getNextTokenKind()){case this.tm.CHAR_SEQUENCE:s+=this.consumeToken(this.tm.CHAR_SEQUENCE).image;break;case this.tm.ASTERISK:s+=this.consumeToken(this.tm.ASTERISK).image;break;case this.tm.BACKSLASH:s+=this.consumeToken(this.tm.BACKSLASH).image;break;case this.tm.COLON:s+=this.consumeToken(this.tm.COLON).image;break;case this.tm.DASH:s+=this.consumeToken(this.tm.DASH).image;break;case this.tm.DIGITS:s+=this.consumeToken(this.tm.DIGITS).image;break;case this.tm.DOT:s+=this.consumeToken(this.tm.DOT).image;break;case this.tm.EQ:s+=this.consumeToken(this.tm.EQ).image;break;case this.tm.ESCAPED_CHAR:s+=this.consumeToken(this.tm.ESCAPED_CHAR).image;break;case this.tm.IMAGE_LABEL:s+=this.consumeToken(this.tm.IMAGE_LABEL).image;break;case this.tm.LT:s+=this.consumeToken(this.tm.LT).image;break;case this.tm.LBRACK:s+=this.consumeToken(this.tm.LBRACK).image;break;case this.tm.RBRACK:s+=this.consumeToken(this.tm.RBRACK).image;break;case this.tm.LPAREN:s+=this.consumeToken(this.tm.LPAREN).image;break;case this.tm.GT:s+=this.consumeToken(this.tm.GT).image;break;case this.tm.RPAREN:s+=this.consumeToken(this.tm.RPAREN).image;break;case this.tm.UNDERSCORE:s+=this.consumeToken(this.tm.UNDERSCORE).image;break;default:if(!this.nextAfterSpace(this.tm.EOL,this.tm.EOF))switch(this.getNextTokenKind()){case this.tm.SPACE:s+=this.consumeToken(this.tm.SPACE).image;break;case this.tm.TAB:this.consumeToken(this.tm.TAB),s+="    "}}while(this.codeTextHasAnyTokenAhead());t.value=s,this.tree.closeScope(t)},looseChar:function(){var t=new koara.Text;switch(this.tree.openScope(),this.getNextTokenKind()){case this.tm.ASTERISK:t.value=this.consumeToken(this.tm.ASTERISK).image;break;case this.tm.BACKTICK:t.value=this.consumeToken(this.tm.BACKTICK).image;break;case this.tm.LBRACK:t.value=this.consumeToken(this.tm.LBRACK).image;break;case this.tm.UNDERSCORE:t.value=this.consumeToken(this.tm.UNDERSCORE).image}this.tree.closeScope(t)},lineBreak:function(){var t=new LineBreak;for(this.tree.openScope();this.getNextTokenKind()==this.tm.SPACE||this.getNextTokenKind()==this.tm.TAB;)this.consumeToken(this.getNextTokenKind());this.consumeToken(this.tm.EOL),this.tree.closeScope(t)},levelWhiteSpace:function(t){for(var s=1;this.getNextTokenKind()==this.tm.GT;)this.consumeToken(this.getNextTokenKind());for(;(this.getNextTokenKind()==this.tm.SPACE||this.getNextTokenKind()==this.tm.TAB)&&t-1>s;)s=this.consumeToken(this.getNextTokenKind()).beginColumn},codeLanguage:function(){var t="";do switch(this.getNextTokenKind()){case this.tm.CHAR_SEQUENCE:t+=this.consumeToken(this.tm.CHAR_SEQUENCE).image;break;case this.tm.ASTERISK:t+=this.consumeToken(this.tm.ASTERISK).image;break;case this.tm.BACKSLASH:t+=this.consumeToken(this.tm.BACKSLASH).image;break;case this.tm.ACKTICK:t+=this.consumeToken(this.tm.BACKTICK).image;break;case this.tm.COLON:t+=this.consumeToken(this.tm.COLON).image;break;case this.tm.DASH:t+=this.consumeToken(this.tm.DASH).image;break;case this.tm.DIGITS:t+=this.consumeToken(this.tm.DIGITS).image;break;case this.tm.DOT:t+=this.consumeToken(this.tm.DOT).imagec;break;case this.tm.EQ:t+=this.consumeToken(this.tm.EQ).image;break;case this.tm.ESCAPED_CHAR:t+=this.consumeToken(this.tm.ESCAPED_CHAR).image;break;case this.tm.IMAGE_LABEL:t+=this.consumeToken(this.tm.IMAGE_LABEL).image;break;case this.tm.LT:t+=this.consumeToken(this.tm.LT).image;break;case this.tm.GT:t+=this.consumeToken(this.tm.GT).image;break;case this.tm.LBRACK:t+=this.consumeToken(this.tm.LBRACK).image;break;case this.tm.RBRACK:t+=this.consumeToken(this.tm.RBRACK).image;break;case this.tm.LPAREN:t+=this.consumeToken(this.tm.LPAREN).image;break;case this.tm.RPAREN:t+=this.consumeToken(this.tm.RPAREN).image;break;case this.tm.UNDERSCORE:t+=this.consumeToken(this.tm.UNDERSCORE).image;break;case this.tm.SPACE:t+=consumeToken(this.tm.SPACE).image;break;case this.tm.TAB:t+="    "}while(this.getNextTokenKind()!=this.tm.EOL&&this.getNextTokenKind()!=this.tm.EOF);return t},inline:function(){do this.hasInlineTextAhead()?this.text():this.modules.indexOf("images")>=0&&this.hasImageAhead()?this.image():this.modules.indexOf("links")>=0&&this.hasLinkAhead()?this.link():this.modules.indexOf("formatting")>=0&&this.multilineAhead(this.tm.ASTERISK)?this.strongMultiline():this.modules.indexOf("formatting")>=0&&this.multilineAhead(this.tm.UNDERSCORE)?this.emMultiline():this.modules.indexOf("code")>=0&&this.multilineAhead(this.tm.BACKTICK)?this.codeMultiline():this.looseChar();while(this.hasInlineElementAhead())},resourceText:function(){var t=new Text;this.tree.openScope();var s="";do switch(this.getNextTokenKind()){case this.tm.CHAR_SEQUENCE:s+=this.consumeToken(this.tm.CHAR_SEQUENCE).image;break;case this.tm.BACKSLASH:s+=this.consumeToken(this.tm.BACKSLASH).image;break;case this.tm.COLON:s+=this.consumeToken(this.tm.COLON).image;break;case this.tm.DASH:s+=this.consumeToken(this.tm.DASH).image;break;case this.tm.DIGITS:s+=this.consumeToken(this.tm.DIGITS).image;break;case this.tm.DOT:s+=this.consumeToken(this.tm.DOT).image;break;case this.tm.EQ:s+=this.consumeToken(this.tm.EQ).image;break;case this.tm.ESCAPED_CHAR:s+=this.consumeToken(this.tm.ESCAPED_CHAR).image.substring(1);break;case this.tm.IMAGE_LABEL:s+=this.consumeToken(this.tm.IMAGE_LABEL).image;break;case this.tm.GT:s+=this.consumeToken(this.tm.GT).image;break;case this.tm.LPAREN:s+=this.consumeToken(this.tm.LPAREN).image;break;case this.tm.LT:s+=this.consumeToken(this.tm.LT).image;break;case this.tm.RPAREN:s+=this.consumeToken(this.tm.RPAREN).image;break;default:if(!this.nextAfterSpace(this.tm.RBRACK))switch(this.getNextTokenKind()){case this.tm.SPACE:s+=this.consumeToken(this.tm.SPACE).image;break;case this.tm.TAB:consumeToken(this.tm.TAB),s+="    "}}while(this.resourceHasElementAhead());t.value=s,this.tree.closeScope(t)},resourceUrl:function(){this.consumeToken(this.tm.LPAREN),this.whiteSpace();var t=this.resourceUrlText();return this.whiteSpace(),this.consumeToken(this.tm.RPAREN),t},resourceUrlText:function(){for(var t="";this.resourceTextHasElementsAhead();)switch(this.getNextTokenKind()){case this.tm.CHAR_SEQUENCE:t+=this.consumeToken(this.tm.CHAR_SEQUENCE).image;break;case this.tm.ASTERISK:t+=this.consumeToken(this.tm.ASTERISK).image;break;case this.tm.BACKSLASH:t+=this.consumeToken(this.tm.BACKSLASH).image;break;case this.tm.BACKTICK:t+=this.consumeToken(this.tm.BACKTICK).image;break;case this.tm.COLON:t+=this.consumeToken(this.tm.COLON).image;break;case this.tm.DASH:t+=this.consumeToken(this.tm.DASH).image;break;case this.tm.DIGITS:t+=this.consumeToken(this.tm.DIGITS).image;break;case this.tm.DOT:t+=this.consumeToken(this.tm.DOT).image;break;case this.tm.EQ:t+=this.consumeToken(this.tm.EQ).image;break;case this.tm.ESCAPED_CHAR:t+=this.consumeToken(this.tm.ESCAPED_CHAR).image.substring(1);break;case this.tm.IMAGE_LABEL:t+=this.consumeToken(this.tm.IMAGE_LABEL).image;break;case this.tm.GT:t+=this.consumeToken(this.tm.GT).image;break;case this.tm.LBRACK:t+=this.consumeToken(this.tm.LBRACK).image;break;case this.tm.LPAREN:t+=this.consumeToken(this.tm.LPAREN).image;break;case this.tm.LT:t+=this.consumeToken(this.tm.LT).image;break;case this.tm.RBRACK:t+=this.consumeToken(this.tm.RBRACK).image;break;case this.tm.UNDERSCORE:t+=this.consumeToken(this.tm.UNDERSCORE).image;break;default:if(!this.nextAfterSpace(this.tm.RPAREN))switch(this.getNextTokenKind()){case this.tm.SPACE:t+=this.consumeToken(this.tm.SPACE).image;break;case this.tm.TAB:this.consumeToken(this.tm.TAB),t+="    "}}return t},strongMultiline:function(){new Strong;for(this.tree.openScope(),this.consumeToken(this.tm.ASTERISK),this.strongMultilineContent();this.textAhead();)this.lineBreak(),this.strongMultilineContent();this.consumeToken(this.tm.ASTERISK),this.tree.closeScope(this.tm.strong)},strongMultilineContent:function(){do if(this.hasTextAhead())this.text();else if(this.modules.indexOf("images")>=0&&this.hasImageAhead())this.image();else if(this.modules.indexOf("links")>=0&&this.hasLinkAhead())this.link();else if(this.modules.indexOf("code")>=0&&this.hasCodeAhead())this.code();else if(this.hasEmWithinStrongMultiline())this.emWithinStrongMultiline();else switch(this.getNextTokenKind()){case this.tm.BACKTICK:this.tree.addSingleValue(new Koara.Text,this.consumeToken(this.tm.BACKTICK));break;case LBRACK:this.tree.addSingleValue(new Koara.Text,this.consumeToken(this.tm.LBRACK));break;case this.tm.UNDERSCORE:this.tree.addSingleValue(new Koara.Text,this.consumeToken(this.tm.UNDERSCORE))}while(this.strongMultilineHasElementsAhead())},strongWithinEmMultiline:function(){new Strong;for(this.tree.openScope(),this.consumeToken(this.tm.ASTERISK),this.strongWithinEmMultilineContent();this.textAhead();)this.lineBreak(),this.strongWithinEmMultilineContent();this.consumeToken(this.tm.ASTERISK),this.tree.closeScope(this.tm.strong)},strongWithinEmMultilineContent:function(){do if(this.hasTextAhead())this.text();else if(this.modules.indexOf("images")>=0&&this.hasImageAhead())this.image();else if(this.modules.indexOf("links")>=0&&this.hasLinkAhead())this.link();else if(this.modules.indexOf("code")>=0&&this.hasCodeAhead())this.code();else switch(this.getNextTokenKind()){case this.tm.BACKTICK:this.tree.addSingleValue(new Koara.Text,this.consumeToken(this.tm.BACKTICK));break;case LBRACK:this.tree.addSingleValue(new Koara.Text,this.consumeToken(this.tm.LBRACK));break;case this.tm.UNDERSCORE:this.tree.addSingleValue(new KoaraText,this.consumeToken(UNDERSCORE))}while(this.strongWithinEmMultilineHasElementsAhead())},strongWithinEm:function(){var t=new Strong;this.tree.openScope(),thiss.consumeToken(this.tm.ASTERISK);do if(this.hasTextAhead())this.text();else if(this.modules.indexOf("images")>=0&&this.hasImageAhead())this.image();else if(this.modules.indexOf("links")>=0&&this.hasLinkAhead())this.link();else if(this.modules.indexOf("code")>=0&&this.hasCodeAhead())this.code();else switch(this.getNextTokenKind()){case this.tm.BACKTICK:this.tree.addSingleValue(new Koara.Text,this.consumeToken(this.tm.BACKTICK));break;case this.tm.LBRACK:this.tree.addSingleValue(new Koara.Text,this.consumeToken(this.tm.LBRACK));break;case this.tm.UNDERSCORE:this.tree.addSingleValue(new KoaraText,this.consumeToken(this.tm.UNDERSCORE))}while(this.strongWithinEmHasElementsAhead());this.consumeToken(this.tm.ASTERISK),this.tree.closeScope(t)},emMultiline:function(){var t=new Em;for(this.tree.openScope(),this.consumeToken(this.tm.UNDERSCORE),this.emMultilineContent();this.textAhead();)this.lineBreak(),this.emMultilineContent();this.consumeToken(this.tm.UNDERSCORE),this.tree.closeScope(t)},emMultilineContent:function(){do if(this.hasTextAhead())this.text();else if(this.modules.indexOf("images")>=0&&this.hasImageAhead())this.image();else if(this.modules.indexOf("links")>=0&&this.hasLinkAhead())this.link();else if(this.modules.indexOf("code")>=0&&this.multilineAhead(this.tm.BACKTICK))this.codeMultiline();else if(this.hasStrongWithinEmMultilineAhead())this.strongWithinEmMultiline();else switch(this.getNextTokenKind()){case this.tm.ASTERISK:this.tree.addSingleValue(new Koara.Text,this.consumeToken(this.tm.ASTERISK));break;case this.tm.BACKTICK:this.tree.addSingleValue(new Koara.Text,this.consumeToken(this.tm.BACKTICK));break;case this.tm.LBRACK:this.tree.addSingleValue(new Koara.Text,this.consumeToken(this.tm.LBRACK))}while(this.emMultilineContentHasElementsAhead())},emWithinStrongMultiline:function(){var t=new Em;for(this.tree.openScope(),this.consumeToken(this.tm.UNDERSCORE),this.emWithinStrongMultilineContent();this.textAhead();)this.lineBreak(),this.emWithinStrongMultilineContent();this.consumeToken(this.tm.UNDERSCORE),this.tree.closeScope(t)},emWithinStrongMultilineContent:function(){do if(this.hasTextAhead())this.text();else if(this.modules.indexOf("images")>=0&&this.hasImageAhead())this.image();else if(this.modules.indexOf("links")>=0&&this.hasLinkAhead())this.link();else if(this.modules.indexOf("code")>=0&&this.hasCodeAhead())this.code();else switch(this.getNextTokenKind()){case this.tm.ASTERISK:this.tree.addSingleValue(new Koara.Text,this.consumeToken(this.tm.ASTERISK));break;case this.tm.BACKTICK:this.tree.addSingleValue(new Koara.Text,this.consumeToken(this.tm.BACKTICK));break;case this.tm.LBRACK:this.tree.addSingleValue(new Koara.Text,this.consumeToken(this.tm.LBRACK))}while(this.emWithinStrongMultilineContentHasElementsAhaed())},emWithinStrong:function(){var t=new Em;this.tree.openScope(),this.consumeToken(this.tm.UNDERSCORE);do if(this.hasTextAhead())this.text();else if(this.modules.indexOf("images")>=0&&this.hasImageAhead())this.image();else if(this.modules.indexOf("links")>=0&&this.hasLinkAhead())this.link();else if(this.modules.indexOf("code")>=0&&this.hasCodeAhead())this.code();else switch(this.getNextTokenKind()){case this.tm.ASTERISK:this.tree.addSingleValue(new Koara.Text,this.consumeToken(this.tm.ASTERISK));break;case this.tm.BACKTICK:this.tree.addSingleValue(new Koara.Text,this.consumeToken(this.tm.BACKTICK));break;case this.tm.LBRACK:this.tree.addSingleValue(new Koara.Text,this.consumeToken(LBRACK))}while(this.emWithinStrongHasElementsAhead());this.consumeToken(this.tm.UNDERSCORE),this.tree.closeScope(t)},codeMultiline:function(){var t=new Code;for(this.tree.openScope(),this.consumeToken(this.tm.BACKTICK),this.codeText();this.textAhead();){for(this.lineBreak(),this.whiteSpace();this.getNextTokenKind()==this.tm.GT;)this.consumeToken(this.tm.GT),this.whiteSpace();this.codeText()}this.consumeToken(this.tm.BACKTICK),this.tree.closeScope(t)},whiteSpace:function(){for(;this.getNextTokenKind()==this.tm.SPACE||this.getNextTokenKind()==this.tm.TAB;)this.consumeToken(this.getNextTokenKind())},hasAnyBlockElementsAhead:function(){try{return this.lookAhead=1,this.lastPosition=this.scanPosition=this.token,!this.scanMoreBlockElements()}catch(t){return!0}},blockAhead:function(t){var s;if(this.getNextTokenKind()==this.tm.EOL){var i,e=2,s=0;do{s=0;do if(i=this.getToken(e++),i.kind==this.tm.GT){if(1==i.beginColumn&&currentBlockLevel>0&&0==currentQuoteLevel)return!1;s++}while(i.kind==this.tm.GT||i.kind==this.tm.SPACE||i.kind==this.tm.TAB);if(s>currentQuoteLevel)return!0;if(s<currentQuoteLevel)return!1}while(i.kind==this.tm.EOL);return i.kind!=this.tm.EOF&&(0==currentBlockLevel||i.beginColumn>=t+2)}return!1},multilineAhead:function(t){
if(this.getNextTokenKind()==t&&this.getToken(2).kind!=t&&this.getToken(2).kind!=this.tm.EOL)for(var s=2;;s++){var i=this.getToken(s);if(i.kind==t)return!0;if(i.kind==this.tm.EOL){s=this.skip(s+1,[this.tm.SPACE,this.tm.TAB]);var e=this.newQuoteLevel(s);if(e!=this.currentQuoteLevel)return!1;if(s=this.skip(s,this.tm.SPACE,this.tm.TAB,this.tm.GT),this.getToken(s).kind==t||this.getToken(s).kind==this.tm.EOL||this.getToken(s).kind==this.tm.DASH||this.getToken(s).kind==this.tm.DIGITS&&this.getToken(s+1).kind==this.tm.DOT||getToken(s).kind==this.tm.BACKTICK&&getToken(s+1).kind==this.tm.BACKTICK&&getToken(s+2).kind==this.tm.BACKTICK||this.headingAhead(s))return!1}else if(i.kind==this.tm.EOF)return!1}return!1},fencesAhead:function(){if(this.getNextTokenKind()==this.tm.EOL){var t=skip(2,this.tm.SPACE,this.tm.TAB,this.tm.GT);if(this.getToken(t).kind==this.tm.BACKTICK&&getToken(t+1).kind==this.tm.BACKTICK&&getToken(t+2).kind==this.tm.BACKTICK)return t=skip(t+3,this.tm.SPACE,this.tm.TAB),this.getToken(t).kind==this.tm.EOL||this.getToken(t).kind==this.tm.EOF}return!1},headingAhead:function(t){if(this.getToken(t).kind==this.tm.EQ)for(var s=1,i=t+1;;i++){if(this.getToken(i).kind!=this.tm.EQ)return!0;if(++s>6)return!1}return!1},listItemAhead:function(t,s){if(this.getNextTokenKind()==this.tm.EOL)for(var i=2,e=1;;i++){var n=this.getToken(i);if(n.kind==this.tm.EOL&&++e>2)return!1;if(n.kind!=this.tm.SPACE&&n.kind!=this.tm.TAB&&n.kind!=this.tm.GT&&n.kind!=this.tm.EOL)return s?n.kind==this.tm.DIGITS&&this.getToken(i+1).kind==this.tm.DOT&&n.beginColumn>=t:n.kind==this.tm.DASH&&n.beginColumn>=t}return!1},textAhead:function(){if(this.getNextTokenKind()==this.tm.EOL&&this.getToken(2).kind!=this.tm.EOL){var t=skip(2,this.tm.SPACE,this.tm.TAB),s=this.newQuoteLevel(t);if(s==this.currentQuoteLevel||!this.modules.contains(Module.BLOCKQUOTES)){t=this.skip(t,this.tm.SPACE,this.tm.TAB,this.tm.GT);var i=this.getToken(t);return!(this.getToken(t).kind==this.tm.EOL||this.modules.contains(Module.LISTS)&&i.kind==this.tm.DASH||this.modules.contains(Module.LISTS)&&i.kind==this.tm.DIGITS&&this.getToken(t+1).kind==this.tm.DOT||this.getToken(t).kind==this.tm.BACKTICK&&this.getToken(t+1).kind==this.tm.BACKTICK&&this.getToken(t+2).kind==this.tm.BACKTICK||this.modules.contains(Module.HEADINGS)&&this.headingAhead(t))}}return!1},nextAfterSpace:function(t){var s=this.skip(1,[this.tm.SPACE,this.tm.TAB]);return t.indexOf(this.getToken(s).kind)>=0},newQuoteLevel:function(t){for(var s=0,i=t;;i++){var e=this.getToken(i);if(e.kind==this.tm.GT)s++;else if(e.kind!=this.tm.SPACE&&e.kind!=this.tm.TAB)return s}},skip:function(t,s){for(var i=t;;i++){var e=this.getToken(i);if(-1==s.indexOf(e.kind)||e.kind==this.tm.EOF)return i}},hasOrderedListAhead:function(){this.lookAhead=2,this.lastPosition=this.scanPosition=this.token;try{return!this.scanToken(this.tm.DIGITS)&&!this.scanToken(this.tm.DOT)}catch(t){return!0}},hasFencedCodeBlockAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanFencedCodeBlock()}catch(t){return!0}},headingHasInlineElementsAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{var t=this.scanPosition;return this.scanTextTokens()&&(this.scanPosition=t,this.scanImage()&&(this.scanPosition=t,this.scanLink()&&(this.scanPosition=t,this.scanStrong()&&(this.scanPosition=t,this.scanEm()&&(this.scanPosition=t,this.scanCode()&&(this.scanPosition=t,this.scanLooseChar()))))))?!1:!0}catch(s){return!0}},hasTextAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanTextTokens()}catch(t){return!0}},hasImageAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanImage()}catch(t){return!0}},blockQuoteHasEmptyLineAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanBlockQuoteEmptyLine()}catch(t){return!0}},hasStrongAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanStrong()}catch(t){return!0}},hasEmAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanEm()}catch(t){return!0}},hasCodeAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanCode()}catch(t){return!0}},blockQuoteHasAnyBlockElementseAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanMoreBlockElements()}catch(t){return!0}},hasBlockQuoteEmptyLinesAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanBlockQuoteEmptyLines()}catch(t){return!0}},listItemHasInlineElements:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanMoreBlockElements()}catch(t){return!0}},hasInlineTextAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanTextTokens()}catch(t){return!0}},hasInlineElementAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanInlineElement()}catch(t){return!0}},imageHasAnyElements:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanImageElement()}catch(t){return!0}},hasResourceTextAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanResourceElements()}catch(t){return!0}},linkHasAnyElements:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanLinkElement()}catch(t){return!0}},hasResourceUrlAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanResourceUrl()}catch(t){return!0}},resourceHasElementAhead:function(){this.lookAhead=2,this.lastPosition=this.scanPosition=this.token;try{return!scanResourceElement()}catch(t){return!0}},resourceTextHasElementsAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanResourceTextElement()}catch(t){return!0}},hasEmWithinStrongMultiline:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanEmWithinStrongMultiline()}catch(t){return!0}},strongMultilineHasElementsAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanStrongMultilineElements()}catch(t){return!0}},strongWithinEmMultilineHasElementsAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanStrongWithinEmMultilineElements()}catch(t){return!0}},hasImage:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanImage()}catch(t){return!0}},hasLinkAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanLink()}catch(t){return!0}},strongEmWithinStrongAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanEmWithinStrong()}catch(t){return!0}},strongHasElements:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanStrongElements()}catch(t){return!0}},strongWithinEmHasElementsAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanStrongWithinEmElements()}catch(t){return!0}},hasStrongWithinEmMultilineAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanStrongWithinEmMultiline()}catch(t){return!0}},emMultilineContentHasElementsAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanEmMultilineContentElements()}catch(t){return!0}},emWithinStrongMultilineContentHasElementsAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!scanEmWithinStrongMultilineContent()}catch(t){return!0}},emHasStrongWithinEm:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanStrongWithinEm()}catch(t){return!0}},emHasElements:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanEmElements()}catch(t){return!0}},emWithinStrongHasElementsAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanEmWithinStrongElements()}catch(t){return!0}},codeTextHasAnyTokenAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanCodeTextTokens()}catch(t){return!0}},textHasTokensAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanText()}catch(t){return!0}},scanLooseChar:function(){var t=this.scanPosition;return this.scanToken(this.tm.ASTERISK)&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK)&&(this.scanPosition=t,this.scanToken(this.tm.LBRACK)))?(this.scanPosition=t,this.scanToken(this.tm.UNDERSCORE)):!1},scanText:function(){var t=this.scanPosition;return this.scanToken(this.tm.BACKSLASH)&&(this.scanPosition=t,this.scanToken(this.tm.CHAR_SEQUENCE)&&(this.scanPosition=t,this.scanToken(this.tm.COLON)&&(this.scanPosition=t,this.scanToken(this.tm.DASH)&&(this.scanPosition=t,this.scanToken(this.tm.DIGITS)&&(this.scanPosition=t,this.scanToken(this.tm.DOT)&&(this.scanPosition=t,this.scanToken(this.tm.EQ)&&(this.scanPosition=t,this.scanToken(this.tm.ESCAPED_CHAR)&&(this.tm.scanPosition=t,this.scanToken(this.tm.GT)&&(this.scanPosition=t,this.scanToken(this.tm.IMAGE_LABEL)&&(this.scanPosition=t,this.scanToken(this.tm.LPAREN)&&(this.scanPosition=t,this.scanToken(this.tm.LT)&&(this.scanPosition=t,this.scanToken(this.tm.RBRACK)&&(this.scanPosition=t,this.scanToken(this.tm.RPAREN))))))))))))))?(this.scanPosition=t,this.lookingAhead=!0,this.semanticLookAhead=!this.nextAfterSpace([this.tm.EOL,this.tm.EOF]),this.lookingAhead=!1,!this.semanticLookAhead||this.scanWhitspaceToken()):!1},scanTextTokens:function(){if(this.scanText())return!0;for(var t;;)if(t=this.scanPosition,this.scanText()){this.scanPosition=t;break}return!1},scanCodeTextTokens:function(){var t=this.scanPosition;return this.scanToken(this.tm.ASTERISK)&&(this.scanPosition=t,this.scanToken(this.tm.BACKSLASH)&&(this.scanPosition=t,this.scanToken(this.tm.CHAR_SEQUENCE)&&(this.scanPosition=t,this.scanToken(this.tm.COLON)&&(this.scanPosition=t,this.scanToken(this.tm.DASH)&&(this.scanPosition=t,this.scanToken(this.tm.DIGITS)&&(this.scanPosition=t,this.scanToken(this.tm.DOT)&&(this.scanPosition=t,this.scanToken(this.tm.EQ)&&(this.scanPosition=t,this.scanToken(this.tm.ESCAPED_CHAR)&&(this.scanPosition=t,this.scanToken(this.tm.IMAGE_LABEL)&&(this.scanPosition=t,this.scanToken(this.tm.LT)&&(this.scanPosition=t,this.scanToken(this.tm.LBRACK)&&(this.scanPosition=t,this.scanToken(this.tm.RBRACK)&&(this.scanPosition=t,this.scanToken(this.tm.LPAREN)&&(this.scanPosition=t,this.scanToken(this.tm.GT)&&(this.scanPosition=t,this.scanToken(this.tm.RPAREN)&&(this.scanPosition=t,this.scanToken(this.tm.UNDERSCORE)))))))))))))))))?(this.scanPosition=t,this.lookingAhead=!0,this.semanticLookAhead=!this.nextAfterSpace([this.tm.EOL,this.tm.EOF]),this.lookingAhead=!1,!this.semanticLookAhead||this.scanWhitspaceToken()):!1},scanCode:function(){return this.scanToken(this.tm.BACKTICK)||this.scanCodeTextTokensAhead()||this.scanToken(this.tm.BACKTICK)},scanCodeMultiline:function(){if(scanToken(this.tm.BACKTICK)||this.scanCodeTextTokensAhead())return!0;for(var t;;)if(t=this.scanPosition,this.hasCodeTextOnNextLineAhead()){this.scanPosition=t;break}return scanToken(BACKTICK)},scanCodeTextTokensAhead:function(){if(this.scanCodeTextTokens())return!0;for(var t;;)if(t=this.scanPosition,this.scanCodeTextTokens()){this.scanPosition=t;break}return!1},hasCodeTextOnNextLineAhead:function(){if(this.scanWhitespaceTokenBeforeEol())return!0;for(var t;;)if(t=this.scanPosition,this.scanToken(this.tm.GT)){this.scanPosition=t;break}return this.scanCodeTextTokensAhead()},scanWhitspaceTokens:function(){for(var t;;)if(t=this.scanPosition,this.scanWhitspaceToken()){this.scanPosition=t;break}return!1},scanWhitespaceTokenBeforeEol:function(){return this.scanWhitspaceTokens()||this.scanToken(this.tm.EOL)},scanEmWithinStrongElements:function(){var t=this.scanPosition;return this.scanTextTokens()&&(this.scanPosition=t,this.scanImage()&&(this.scanPosition=t,this.scanLink()&&(this.scanPosition=t,this.scanCode()&&(this.scanPosition=t,this.scanToken(this.tm.ASTERISK)&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK))))))?(this.scanPosition=t,this.scanToken(this.tm.LBRACK)):!1},scanEmWithinStrong:function(){if(this.scanToken(this.tm.UNDERSCORE)||this.scanEmWithinStrongElements())return!0;for(var t;;)if(t=this.scanPosition,this.scanEmWithinStrongElements()){this.scanPosition=t;break}return this.scanToken(this.tm.UNDERSCORE)},scanEmElements:function(){var t=this.scanPosition;return this.scanTextTokens()&&(this.scanPosition=t,this.scanImage()&&(this.scanPosition=t,this.scanLink()&&(this.scanPosition=t,this.scanCode()&&(this.scanPosition=t,this.scanStrongWithinEm()&&(this.scanPosition=t,this.scanToken(this.tm.ASTERISK)&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK)))))))?(this.scanPosition=t,this.scanToken(this.tm.LBRACK)):!1},scanEm:function(){if(this.scanToken(this.tm.UNDERSCORE)||this.scanEmElements())return!0;for(var t;;)if(t=this.scanPosition,this.scanEmElements()){this.scanPosition=t;break}return this.scanToken(this.tm.UNDERSCORE)},scanEmWithinStrongMultilineContent:function(){var t=this.scanPosition;return this.scanTextTokens()&&(this.scanPosition=t,this.scanImage()&&(this.scanPosition=t,this.scanLink()&&(this.scanPosition=t,this.scanCode()&&(this.scanPosition=t,this.scanToken(this.tm.ASTERISK)&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK))))))?(this.scanPosition=t,this.scanToken(this.tm.LBRACK)):!1},hasNoEmWithinStrongMultilineContentAhead:function(){if(this.scanEmWithinStrongMultilineContent())return!0;for(var t;;)if(t=this.scanPosition,this.scanEmWithinStrongMultilineContent()){this.scanPosition=t;break}return!1},scanEmWithinStrongMultiline:function(){if(this.scanToken(this.tm.UNDERSCORE)||this.hasNoEmWithinStrongMultilineContentAhead())return!0;for(var t;;)if(t=this.scanPosition,this.scanWhitespaceTokenBeforeEol()||this.hasNoEmWithinStrongMultilineContentAhead()){this.scanPosition=t;break}return this.scanToken(this.tm.UNDERSCORE)},scanEmMultilineContentElements:function(){var t=this.scanPosition;return this.scanTextTokens()&&(this.scanPosition=t,this.scanImage()&&(this.scanPosition=t,this.scanLink()&&(this.scanPosition=t,this.lookingAhead=!0,this.semanticLookAhead=this.multilineAhead(this.tm.BACKTICK),this.lookingAhead=!1,(!this.semanticLookAhead||this.scanCodeMultiline())&&(this.scanPosition=t,this.scanStrongWithinEmMultiline()&&(this.scanPosition=t,this.scanToken(this.tm.ASTERISK)&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK)))))))?(this.scanPosition=t,this.scanToken(this.tm.LBRACK)):!1},scanStrongWithinEmElements:function(){var t=this.scanPosition;return this.scanTextTokens()&&(this.scanPosition=t,this.scanImage()&&(this.scanPosition=t,this.scanLink()&&(this.scanPosition=t,this.scanCode()&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK)&&(this.scanPosition=t,this.scanToken(this.tm.LBRACK))))))?(this.scanPosition=t,this.scanToken(this.tm.UNDERSCORE)):!1},scanStrongWithinEm:function(){if(this.scanToken(this.tm.ASTERISK)||this.scanStrongWithinEmElements())return!0;for(var t;;)if(t=this.scanPosition,this.scanStrongWithinEmElements()){this.scanPosition=t;break}return this.scanToken(this.tm.ASTERISK)},scanStrongElements:function(){var t=this.scanPosition;return this.scanTextTokens()&&(this.scanPosition=t,this.scanImage()&&(this.scanPosition=t,this.scanLink()&&(this.scanPosition=t,this.lookingAhead=!0,this.semanticLookAhead=this.multilineAhead(this.tm.BACKTICK),this.lookingAhead=!1,(!this.semanticLookAhead||this.scanCodeMultiline())&&(this.scanPosition=t,this.scanEmWithinStrong()&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK)&&(this.scanPosition=t,this.scanToken(this.tm.LBRACK)))))))?(this.scanPosition=t,this.scanToken(this.tm.UNDERSCORE)):!1},scanStrong:function(){if(this.scanToken(this.tm.ASTERISK)||this.scanStrongElements())return!0;for(var t;;)if(t=this.scanPosition,this.scanStrongElements()){this.scanPosition=t;break}return this.scanToken(this.tm.ASTERISK)},scanStrongWithinEmMultilineElements:function(){var t=this.scanPosition;return this.scanTextTokens()&&(this.scanPosition=t,this.scanImage()&&(this.scanPosition=t,this.scanLink()&&(this.scanPosition=t,this.scanCode()&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK)&&(this.scanPosition=t,this.scanToken(this.tm.LBRACK))))))?(this.scanPosition=t,this.scanToken(this.tm.UNDERSCORE)):!1},scanForMoreStrongWithinEmMultilineElements:function(){if(this.scanStrongWithinEmMultilineElements())return!0;for(var t;;)if(t=this.scanPosition,this.scanStrongWithinEmMultilineElements()){this.scanPosition=t;break}return!1},scanStrongWithinEmMultiline:function(){if(this.scanToken(ASTERISK)||this.scanForMoreStrongWithinEmMultilineElements())return!0;for(var t;;)if(t=this.scanPosition,this.scanWhitespaceTokenBeforeEol()||this.scanForMoreStrongWithinEmMultilineElements()){this.scanPosition=t;break}return this.scanToken(this.tm.ASTERISK)},scanStrongMultilineElements:function(){var t=this.scanPosition;return this.scanTextTokens()&&(this.scanPosition=t,this.scanImage()&&(this.scanPosition=t,this.scanLink()&&(this.scanPosition=t,this.scanCode()&&(this.scanPosition=t,this.scanEmWithinStrongMultiline()&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK)&&(this.scanPosition=t,this.scanToken(this.tm.LBRACK)))))))?(this.scanPosition=t,this.scanToken(this.tm.UNDERSCORE)):!1},scanResourceTextElement:function(){var t=this.scanPosition;return this.scanToken(this.tm.ASTERISK)&&(this.scanPosition=t,this.scanToken(this.tm.BACKSLASH)&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK)&&(this.scanPosition=t,this.scanToken(this.tm.CHAR_SEQUENCE)&&(this.scanPosition=t,this.scanToken(this.tm.COLON)&&(this.scanPosition=t,this.scanToken(this.tm.DASH)&&(this.scanPosition=t,this.scanToken(this.tm.DIGITS)&&(this.scanPosition=t,this.scanToken(this.tm.DOT)&&(this.scanPosition=t,this.scanToken(this.tm.EQ)&&(this.scanPosition=t,this.scanToken(this.tm.ESCAPED_CHAR)&&(this.scanPosition=t,this.scanToken(this.tm.IMAGE_LABEL)&&(this.scanPosition=t,this.scanToken(this.tm.GT)&&(this.scanPosition=t,this.scanToken(this.tm.LBRACK)&&(this.scanPosition=t,this.scanToken(this.tm.LPAREN)&&(this.scanPosition=t,this.scanToken(this.tm.LT)&&(this.scanPosition=t,this.scanToken(this.tm.RBRACK)&&(this.scanPosition=t,this.scanToken(this.tm.UNDERSCORE)))))))))))))))))?(this.scanPosition=t,this.lookingAhead=!0,this.semanticLookAhead=!this.nextAfterSpace([this.tm.RPAREN]),this.lookingAhead=!1,!this.semanticLookAhead||this.scanWhitspaceToken()):!1},scanImageElement:function(){var t=this.scanPosition;return this.scanResourceElements()&&(this.scanPosition=t,this.scanLooseChar())?!0:!1},scanResourceTextElements:function(){for(var t;;)if(t=this.scanPosition,this.scanResourceTextElement()){this.scanPosition=t;break}return!1},scanResourceUrl:function(){return this.scanToken(this.tm.LPAREN)||this.scanWhitspaceTokens()||this.scanResourceTextElements()||this.scanWhitspaceTokens()||this.scanToken(this.tm.RPAREN)},scanLinkElement:function(){var t=this.scanPosition;return this.scanImage()&&(this.scanPosition=t,this.scanStrong()&&(this.scanPosition=t,this.scanEm()&&(this.scanPosition=t,this.scanCode()&&(this.scanPosition=t,this.scanResourceElements()))))?(this.scanPosition=t,this.scanLooseChar()):!1},scanResourceElement:function(){var t=this.scanPosition;return this.scanToken(this.tm.BACKSLASH)&&(this.scanPosition=t,this.scanToken(this.tm.COLON)&&(this.scanPosition=t,this.scanToken(this.tm.CHAR_SEQUENCE)&&(this.scanPosition=t,this.scanToken(this.tm.DASH)&&(this.scanPosition=t,this.scanToken(this.tm.DIGITS)&&(this.scanPosition=t,this.scanToken(this.tm.DOT)&&(this.scanPosition=t,this.scanToken(this.tm.EQ)&&(this.scanPosition=t,this.scanToken(this.tm.ESCAPED_CHAR)&&(this.scanPosition=t,this.scanToken(this.tm.IMAGE_LABEL)&&(this.scanPosition=t,this.scanToken(this.tm.GT)&&(this.scanPosition=t,this.scanToken(this.tm.LPAREN)&&(this.scanPosition=t,this.scanToken(this.tm.LT)&&(this.scanPosition=t,this.scanToken(this.tm.RPAREN)))))))))))))?(this.scanPosition=t,this.lookingAhead=!0,this.semanticLookAhead=!this.nextAfterSpace([this.tm.RBRACK]),this.lookingAhead=!1,!this.semanticLookAhead||this.scanWhitspaceToken()):!1},scanResourceElements:function(){if(this.scanResourceElement())return!0;for(var t;;)if(t=this.scanPosition,this.scanResourceElement()){this.scanPosition=t;break}return!1},scanLink:function(){if(this.scanToken(this.tm.LBRACK)||this.scanWhitspaceTokens()||this.scanLinkElement())return!0;for(var t;;)if(t=this.scanPosition,this.scanLinkElement()){this.scanPosition=t;break}return this.scanWhitspaceTokens()||this.scanToken(this.tm.RBRACK)?!0:(t=this.scanPosition,this.scanResourceUrl()&&(this.scanPosition=t),!1)},scanImage:function(){if(this.scanToken(this.tm.LBRACK)||this.scanWhitspaceTokens()||this.scanToken(this.IMAGE_LABEL)||this.scanImageElement())return!0;for(var t;;)if(t=this.scanPosition,this.scanImageElement()){this.scanPosition=t;break}return this.scanWhitspaceTokens()||this.scanToken(this.tm.RBRACK)?!0:(t=this.scanPosition,this.scanResourceUrl()&&(this.scanPosition=t),!1)},scanInlineElement:function(){var t=this.scanPosition;return!this.scanTextTokens()||(this.scanPosition=t,!this.scanImage()||(this.scanPosition=t,!this.scanLink()||(this.scanPosition=t,this.lookingAhead=!0,this.semanticLookAhead=this.multilineAhead(this.tm.ASTERISK),this.lookingAhead=!1,this.semanticLookAhead&&!this.scanToken(this.tm.ASTERISK)||(this.scanPosition=t,this.lookingAhead=!0,this.semanticLookAhead=this.multilineAhead(this.tm.UNDERSCORE),this.lookingAhead=!1,this.semanticLookAhead&&!this.scanToken(this.tm.UNDERSCORE)||(this.scanPosition=t,this.lookingAhead=!0,this.semanticLookAhead=this.multilineAhead(this.tm.BACKTICK),this.lookingAhead=!1,this.semanticLookAhead&&!this.scanCodeMultiline())))))?!1:(this.scanPosition=t,this.scanLooseChar())},scanParagraph:function(){var t;if(this.scanInlineElement())return!0;for(;;)if(t=this.scanPosition,this.scanInlineElement()){this.scanPosition=t;break}return!1},scanForCodeLanguageElement:function(){var t=this.scanPosition;return this.scanToken(this.tm.CHAR_SEQUENCE)&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK))?!0:!1},scanForCodeLanguageElements:function(){if(this.scanForCodeLanguageElement())return!0;for(var t;;)if(t=this.scanPosition,this.scanForCodeLanguageElement()){this.scanPosition=t;break}return!1},scanWhitspaceToken:function(){var t=this.scanPosition;return this.scanToken(this.tm.SPACE)&&(this.scanPosition=t,this.scanToken(this.tm.TAB))?!0:!1},scanFencedCodeBlock:function(){if(this.scanToken(this.tm.BACKTICK)||this.scanToken(this.tm.BACKTICK)||this.scanToken(this.tm.BACKTICK))return!0;for(var t;;)if(t=this.scanPosition,this.scanToken(this.tm.BACKTICK)){this.scanPosition=t;break}return this.scanWhitspaceTokens()?!0:(t=this.scanPosition,this.scanForCodeLanguageElements()&&(this.scanPosition=t),t=this.scanPosition,(this.scanToken(this.tm.EOL)||this.scanWhitspaceTokens())&&(this.scanPosition=t),!1)},scanBlockQuoteEmptyLines:function(){return this.scanBlockQuoteEmptyLine()||this.scanToken(EOL)},scanBlockQuoteEmptyLine:function(){if(this.scanToken(this.tm.EOL)||this.scanWhitspaceTokens()||this.scanToken(this.tm.GT)||this.scanWhitspaceTokens())return!0;for(var t;;)if(t=this.scanPosition,this.scanToken(this.tm.GT)||scanWhitspaceTokens()){this.scanPosition=t;break}return!1},scanForHeadersigns:function(){if(this.scanToken(this.tm.EQ))return!0;for(var t;;)if(t=this.scanPosition,this.scanToken(this.tm.EQ)){this.scanPosition=t;break}return!1},scanMoreBlockElements:function(){var t=this.scanPosition;return this.lookingAhead=!0,this.semanticLookAhead=this.headingAhead(1),this.lookingAhead=!1,(!this.semanticLookAhead||this.scanForHeadersigns())&&(this.scanPosition=t,this.scanToken(this.tm.GT)&&(this.scanPosition=t,this.scanToken(this.tm.DASH)&&(this.scanPosition=t,(scanToken(DIGITS)||scanToken(DOT))&&(this.scanPosition=t,scanFencedCodeBlock()))))?(this.scanPosition=t,this.scanParagraph()):!1},scanToken:function(t){if(this.scanPosition==this.lastPosition?(this.lookAhead--,null==this.scanPosition.next?this.lastPosition=this.scanPosition=this.scanPosition.next=this.tm.getNextToken():this.lastPosition=this.scanPosition=this.scanPosition.next):this.scanPosition=this.scanPosition.next,this.scanPosition.kind!=t)return!0;if(0==this.lookAhead&&this.scanPosition==this.lastPosition)throw this.lookAheadSuccess;return!1},getNextTokenKind:function(){return-1!=this.nextTokenKind?this.nextTokenKind:null==(this.nextToken=this.token.next)?(this.token.next=this.tm.getNextToken(),this.nextTokenKind=this.token.next.kind):this.nextTokenKind=this.nextToken.kind},consumeToken:function(t){return old=this.token,null!=this.token.next?this.token=this.token.next:this.token=this.token.next=this.tm.getNextToken(),this.nextTokenKind=-1,this.token.kind==t?this.token:(this.token=old,this.token)},getToken:function(s){t=this.lookingAhead?this.scanPosition:this.token;for(var i=0;s>i;i++)null!=t.next?t=t.next:t=t.next=this.tm.getNextToken();return t}},koara.Token=function(t,s,i,e,n,o){this.kind=t,this.beginLine=s,this.beginColumn=i,this.endLine=e,this.endColumn=n,this.image=o},koara.Token.prototype={constructor:koara.Token},koara.TokenManager=function(t){this.cs=t,this.jjrounds=[],this.jjstateSet=[],this.jjnextStates=[2,3,5]},koara.TokenManager.prototype={constructor:koara.TokenManager,EOF:0,ASTERISK:1,BACKSLASH:2,BACKTICK:3,CHAR_SEQUENCE:4,COLON:5,DASH:6,DIGITS:7,DOT:8,EOL:9,EQ:10,ESCAPED_CHAR:11,GT:12,IMAGE_LABEL:13,LBRACK:14,LPAREN:15,LT:16,RBRACK:17,RPAREN:18,SPACE:19,TAB:20,UNDERSCORE:21,getNextToken:function(){try{for(var t=0;;){try{this.curChar=this.cs.beginToken()}catch(s){return this.matchedKind=0,this.matchedPos=-1,this.fillToken()}if(this.matchedKind=2147483647,this.matchedPos=0,t=this.moveStringLiteralDfa0_0(),2147483647!=this.matchedKind)return this.matchedPos+1<t&&this.cs.backup(t-this.matchedPos-1),this.fillToken()}}catch(s){return null}},fillToken:function(){return new koara.Token(this.matchedKind,this.cs.getBeginLine(),this.cs.getBeginColumn(),this.cs.getEndLine(),this.cs.getEndColumn(),this.cs.getImage())},moveStringLiteralDfa0_0:function(){switch(this.curChar.charCodeAt(0)){case 9:return this.startNfaWithStates(0,this.TAB,8);case 32:return this.startNfaWithStates(0,this.SPACE,8);case 40:return this.stopAtPos(0,this.LPAREN);case 41:return this.stopAtPos(0,this.RPAREN);case 42:return this.stopAtPos(0,this.ASTERISK);case 45:return this.stopAtPos(0,this.DASH);case 46:return this.stopAtPos(0,this.DOT);case 58:return this.stopAtPos(0,this.COLON);case 60:return this.stopAtPos(0,this.LT);case 61:return this.stopAtPos(0,this.EQ);case 62:return this.stopAtPos(0,this.GT);case 73:return this.moveStringLiteralDfa1_0(8192);case 91:return this.stopAtPos(0,this.LBRACK);case 92:return this.startNfaWithStates(0,this.BACKSLASH,7);case 93:return this.stopAtPos(0,this.RBRACK);case 95:return this.stopAtPos(0,this.UNDERSCORE);case 96:return this.stopAtPos(0,this.BACKTICK);case 105:return this.moveStringLiteralDfa1_0(8192);default:return this.moveNfa(6,0)}},startNfaWithStates:function(t,s,i){this.matchedKind=s,this.matchedPos=t;try{this.curChar=this.cs.readChar()}catch(e){return t+1}return this.moveNfa(i,t+1)},stopAtPos:function(t,s){return this.matchedKind=s,this.matchedPos=t,t+1},moveStringLiteralDfa1_0:function(t){return this.curChar=this.cs.readChar(),77==this.curChar.charCodeAt(0)||109==this.curChar.charCodeAt(0)?this.moveStringLiteralDfa2_0(t,8192):this.startNfa(0,t)},moveStringLiteralDfa2_0:function(t,s){return this.curChar=this.cs.readChar(),65==this.curChar.charCodeAt(0)||97==this.curChar.charCodeAt(0)?this.moveStringLiteralDfa3_0(s,8192):this.startNfa(1,s)},moveStringLiteralDfa3_0:function(t,s){return this.curChar=this.cs.readChar(),71==this.curChar.charCodeAt(0)||103==this.curChar.charCodeAt(0)?this.moveStringLiteralDfa4_0(s,8192):this.startNfa(2,s)},moveStringLiteralDfa4_0:function(t,s){return this.curChar=this.cs.readChar(),69==this.curChar.charCodeAt(0)||101==this.curChar.charCodeAt(0)?this.moveStringLiteralDfa5_0(s,8192):this.startNfa(3,s)},moveStringLiteralDfa5_0:function(t,s){return this.curChar=this.cs.readChar(),58==this.curChar.charCodeAt(0)&&0!=(8192&s)?this.stopAtPos(5,13):this.startNfa(4,s)},startNfa:function(t,s){return this.moveNfa(this.stopStringLiteralDfa(t,s),t+1)},moveNfa:function(t,s){var i=0;this.jjnewStateCnt=8;var e=1;this.jjstateSet[0]=t;for(var n=2147483647;;){if(2147483647==++this.round&&(this.round=2147483649),this.curChar.charCodeAt(0)<64){var o=1<<this.curChar.charCodeAt(0);do switch(this.jjstateSet[--e]){case 6:0!=(0x880098feffffd800&o)?(n>4&&(n=4),this.checkNAdd(0)):0!=(0x3ff000000000000&o)?(n>7&&(n=7),this.checkNAdd(1)):0!=(9216&o)?n>9&&(n=9):0!=(4294967808&o)&&this.checkNAddStates(0,2),13==this.curChar.charCodeAt(0)&&(this.jjstateSet[this.jjnewStateCnt++]=4);break;case 8:0!=(9216&o)?n>9&&(n=9):0!=(4294967808&o)&&this.checkNAddStates(0,2),13==this.curChar.charCodeAt(0)&&(this.jjstateSet[this.jjnewStateCnt++]=4);break;case 0:0!=(0x880098feffffd800&o)&&(n=4,this.checkNAdd(0));break;case 1:0!=(0x3ff000000000000&o)&&(n>7&&(n=7),this.checkNAdd(1));break;case 2:0!=(4294967808&o)&&this.checkNAddStates(0,2);break;case 3:0!=(9216&o)&&n>9&&(n=9);break;case 4:10==this.curChar.charCodeAt(0)&&n>9&&(n=9);break;case 5:13==this.curChar.charCodeAt(0)&&(this.jjstateSet[this.jjnewStateCnt++]=4);break;case 7:0!=(0x77ff670000000000&o)&&n>11&&(n=11)}while(e!=i)}else if(this.curChar.charCodeAt(0)<128){var o=1<<(63&this.curChar.charCodeAt(0));do switch(this.jjstateSet[--e]){case 6:0!=o?(n>4&&(n=4),this.checkNAdd(0)):92==this.curChar.charCodeAt(0)&&(this.jjstateSet[this.jjnewStateCnt++]=7);break;case 0:0!=(-7381975041&o)&&(n=4,this.checkNAdd(0));break;case 7:0!=(7381975040&o)&&n>11&&(n=11)}while(e!=i)}else do switch(this.jjstateSet[--e]){case 6:case 0:n>4&&(n=4),this.checkNAdd(0)}while(e!=i);if(2147483647!=n&&(this.matchedKind=n,this.matchedPos=s,n=2147483647),++s,(e=this.jjnewStateCnt)==(i=8-(this.jjnewStateCnt=i)))return s;try{this.curChar=this.cs.readChar()}catch(h){return s}}},checkNAddStates:function(t,s){do this.checkNAdd(this.jjnextStates[t]);while(t++!=s)},checkNAdd:function(t){this.jjrounds[t]!=this.round&&(this.jjstateSet[this.jjnewStateCnt++]=t,this.jjrounds[t]=this.round)},stopStringLiteralDfa:function(t,s){if(0==t){if(0!=(8192&s))return this.matchedKind=4,0;if(0!=(1572864&s))return 8;if(0!=(4&s))return 7}else{if(1==t&&0!=(8192&s))return this.matchedKind=4,this.matchedPos=1,0;if(2==t&&0!=(8192&s))return this.matchedKind=4,this.matchedPos=2,0;if(3==t&&0!=(8192&s))return this.matchedKind=4,this.matchedPos=3,0;if(4==t&&0!=(8192&s))return this.matchedKind=4,this.matchedPos=4,0}return-1}},koara.TreeState=function(){this.nodes=[],this.marks=[],this.nodesOnStack=0,this.currentMark=0},koara.TreeState.prototype={constructor:koara.TreeState,openScope:function(){this.marks.push(this.currentMark),this.currentMark=this.nodesOnStack},closeScope:function(t){for(a=this.nodeArity(),this.currentMark=this.marks.pop();a-- >0;)c=this.popNode(),c.parent=t,t.add(c,a);this.pushNode(t)},addSingleValue:function(t,s){this.openScope(),t.setValue(s.image),this.closeScope(t)},nodeArity:function(){return this.nodesOnStack-this.currentMark},popNode:function(){return--this.nodesOnStack,this.nodes.pop()},pushNode:function(t){this.nodes.push(t),++this.nodesOnStack}};
//# sourceMappingURL=koara.min.js.map
