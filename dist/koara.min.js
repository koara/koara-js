var koara={};"undefined"==typeof exports||exports.nodeType?root.koara=koara:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=koara),exports.koara=koara),koara.CharStream=function(t){this.available=4096,this.bufsize=4096,this.tokenBegin=0,this.bufcolumn=[],this.bufpos=-1,this.bufline=[],this.column=0,this.line=1,this.prevCharIsLF,this.reader=t,this.buffer=[],this.maxNextCharInd=0,this.inBuf=0,this.tabSize=4},koara.CharStream.prototype.beginToken=function(){this.tokenBegin=-1;var t=this.readChar();return this.tokenBegin=this.bufpos,t},koara.CharStream.prototype.readChar=function(){if(this.inBuf>0)return--this.inBuf,++this.bufpos==this.bufsize&&(this.bufpos=0),this.buffer[this.bufpos];++this.bufpos>=this.maxNextCharInd&&this.fillBuff();var t=this.buffer[this.bufpos];return this.updateLineColumn(t),t},koara.CharStream.prototype.fillBuff=function(){this.maxNextCharInd==this.available&&(this.available==this.bufsize?(this.bufpos=0,this.maxNextCharInd=0,this.tokenBegin>2048&&(this.available=this.tokenBegin)):this.available=this.bufsize);var t;try{if(-1==(t=this.reader.read(this.buffer,this.maxNextCharInd,this.available-this.maxNextCharInd)))throw"IOException";this.maxNextCharInd+=t}catch(i){throw--this.bufpos,this.backup(0),-1==this.tokenBegin&&(this.tokenBegin=this.bufpos),i}},koara.CharStream.prototype.backup=function(t){this.inBuf+=this.amount,(this.bufpos-=this.amount)<0&&(this.bufpos+=this.bufsize)},koara.CharStream.prototype.updateLineColumn=function(t){switch(this.column++,this.prevCharIsLF&&(this.prevCharIsLF=!1,this.column=1,this.line+=this.column),t){case"\n":this.prevCharIsLF=!0;break;case"	":this.column--,this.column+=this.tabSize-this.column%this.tabSize}this.bufline[this.bufpos]=this.line,this.bufcolumn[this.bufpos]=this.column},koara.CharStream.prototype.getImage=function(){return this.bufpos>=this.tokenBegin?this.buffer.slice(this.tokenBegin,this.bufpos-this.tokenBegin+1).join(""):this.buffer.slice(this.tokenBegin,this.bufsize-this.tokenBegin).join("")+this.buffer.slice(0,this.bufpos+1).join("")},koara.CharStream.prototype.getBeginColumn=function(){return this.bufpos in this.bufcolumn?this.bufcolumn[this.bufpos]:0},koara.CharStream.prototype.getBeginLine=function(){return this.bufpos in this.bufline?this.bufline[this.bufpos]:0},koara.CharStream.prototype.getEndColumn=function(){return this.tokenBegin in this.bufcolumn?this.bufcolumn[this.tokenBegin]:0},koara.CharStream.prototype.getEndLine=function(){return this.tokenBegin in this.bufline?this.bufline[this.tokenBegin]:0},koara.StringReader=function(t){this.index=0,this.text=t},koara.StringReader.prototype.read=function(t,i,e){if(this.text.substr(this.index).length>0){for(var s=0,h=0;e>h;h++){var n=this.text.substr(this.index+h,1);""!==n&&(t[i+h]=n,s++)}return this.index+=e,s}return-1};
//# sourceMappingURL=koara.min.js.map
