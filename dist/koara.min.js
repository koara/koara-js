var koara={};"undefined"==typeof exports||exports.nodeType?root.koara=koara:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=koara),exports.koara=koara),koara.Node=function(){this.children=[]},koara.Node.prototype={constructor:koara.Node,add:function(t,o){children.push(t)},childrenAccept:function(t){for(var o=0;o<this.children.length;o++)this.children[o].accept(t)}},koara.Document=function(){},koara.Document.prototype=new koara.Node,koara.Document.prototype.constructor=koara.Document,koara.Document.prototype.accept=function(t){t.visitDocument(this)},koara.BlockElement=function(){},koara.BlockElement.prototype=new koara.Node,koara.BlockElement.prototype={constructor:koara.BlockElement,isNested:function(){return!(this.parent instanceof Document)},isSingleChild:function(){return 1==this.parent.children.length},accept:function(t){t.visit(this)}},koara.BlockQuote=function(){},koara.BlockQuote.prototype=new koara.BlockElement,koara.BlockQuote.prototype={constructor:koara.BlockQuote,accept:function(t){t.visit(this)}},koara.Code=function(){},koara.Code.prototype=new koara.Node,koara.Code.prototype={constructor:koara.Code,accept:function(t){t.visit(this)}},koara.CodeBlock=function(){},koara.CodeBlock.prototype=new koara.BlockElement,koara.CodeBlock.prototype={constructor:koara.CodeBlock,accept:function(t){t.visit(this)}},koara.Em=function(){},koara.Em.prototype=new koara.Node,koara.Em.prototype={constructor:koara.Em,accept:function(t){t.visit(this)}},koara.Heading=function(){},koara.Heading.prototype=new koara.BlockElement,koara.Heading.prototype={constructor:koara.Heading,accept:function(t){t.visit(this)}},koara.Image=function(){},koara.Image.prototype=new koara.Node,koara.Image.prototype={constructor:koara.Image,accept:function(t){t.visit(this)}},koara.LineBreak=function(){},koara.LineBreak.prototype=new koara.Node,koara.LineBreak.prototype={constructor:koara.LineBreak,accept:function(t){t.visit(this)}},koara.Link=function(){},koara.Link.prototype=new koara.Node,koara.Link.prototype={constructor:koara.Link,accept:function(t){t.visit(this)}},koara.ListBlock=function(){},koara.ListBlock.prototype=new koara.BlockElement,koara.ListBlock.prototype={constructor:koara.ListBlock,accept:function(t){t.visit(this)}},koara.ListItem=function(){},koara.ListItem.prototype=new koara.Node,koara.ListItem.prototype={constructor:koara.ListItem,accept:function(t){t.visit(this)}},koara.Paragraph=function(){},koara.Paragraph.prototype=new koara.BlockElement,koara.Paragraph.prototype={constructor:koara.Paragraph,accept:function(t){t.visit(this)}},koara.Strong=function(){},koara.Strong.prototype=new koara.Node,koara.Strong.prototype={constructor:koara.Strong,accept:function(t){t.visit(this)}},koara.StringReader=function(t){this.index=0,this.text=t},koara.StringReader.prototype={constructor:koara.StringReader,read:function(t,o,e){if(this.text.substr(this.index).length>0){for(var n=0,i=0;e>i;i++){var a=this.text.substr(this.index+i,1);""!==a&&(t[o+i]=a,n++)}return this.index+=e,n}return-1}},koara.Html5Renderer=function(){},koara.Html5Renderer.prototype={constructor:koara.Html5Renderer,visitDocument:function(t){this.output="",t.childrenAccept(this)}},koara.CharStream=function(t){this.available=4096,this.bufsize=4096,this.tokenBegin=0,this.bufcolumn=[],this.bufpos=-1,this.bufline=[],this.column=0,this.line=1,this.prevCharIsLF,this.reader=t,this.buffer=[],this.maxNextCharInd=0,this.inBuf=0,this.tabSize=4},koara.CharStream.prototype={constructor:koara.CharStream,beginToken:function(){this.tokenBegin=-1;var t=this.readChar();return this.tokenBegin=this.bufpos,t},readChar:function(){if(this.inBuf>0)return--this.inBuf,++this.bufpos==this.bufsize&&(this.bufpos=0),this.buffer[this.bufpos];++this.bufpos>=this.maxNextCharInd&&this.fillBuff();var t=this.buffer[this.bufpos];return this.updateLineColumn(t),t},fillBuff:function(){this.maxNextCharInd==this.available&&(this.available==this.bufsize?(this.bufpos=0,this.maxNextCharInd=0,this.tokenBegin>2048&&(this.available=this.tokenBegin)):this.available=this.bufsize);var t;try{if(-1==(t=this.reader.read(this.buffer,this.maxNextCharInd,this.available-this.maxNextCharInd)))throw"IOException";this.maxNextCharInd+=t}catch(o){throw--this.bufpos,this.backup(0),-1==this.tokenBegin&&(this.tokenBegin=this.bufpos),o}},backup:function(t){this.inBuf+=this.amount,(this.bufpos-=this.amount)<0&&(this.bufpos+=this.bufsize)},updateLineColumn:function(t){switch(this.column++,this.prevCharIsLF&&(this.prevCharIsLF=!1,this.column=1,this.line+=this.column),t){case"\n":this.prevCharIsLF=!0;break;case"	":this.column--,this.column+=this.tabSize-this.column%this.tabSize}this.bufline[this.bufpos]=this.line,this.bufcolumn[this.bufpos]=this.column},getImage:function(){return this.bufpos>=this.tokenBegin?this.buffer.slice(this.tokenBegin,this.bufpos-this.tokenBegin+1).join(""):this.buffer.slice(this.tokenBegin,this.bufsize-this.tokenBegin).join("")+this.buffer.slice(0,this.bufpos+1).join("")},getBeginColumn:function(){return this.bufpos in this.bufcolumn?this.bufcolumn[this.bufpos]:0},getBeginLine:function(){return this.bufpos in this.bufline?this.bufline[this.bufpos]:0},getEndColumn:function(){return this.tokenBegin in this.bufcolumn?this.bufcolumn[this.tokenBegin]:0},getEndLine:function(){return this.tokenBegin in this.bufline?this.bufline[this.tokenBegin]:0}},koara.LookaheadSuccess=function(){},koara.LookaheadSuccess.prototype={constructor:koara.LookaheadSuccess};var Module={};koara.Parser=function(){this.lookAheadSuccess=new koara.LookaheadSuccess,this.modules=["paragraphs","headings","lists","links","images","formatting","blockquotes","code"]},koara.Parser.prototype={constructor:koara.Parser,parse:function(t){return this.parseReader(new koara.StringReader(t))},parseReader:function(t){for(this.cs=new koara.CharStream(t),this.tm=new koara.TokenManager(this.cs),token=new koara.Token,tree=new koara.TreeState,this.nextTokenKind=-1,document=new koara.Document,tree.openScope();this.getNextTokenKind()==this.tm.EOL;)this.consumeToken(this.tm.EOL);return document},blockElement:function(){},getNextTokenKind:function(){return-1!=this.nextTokenKind?this.nextTokenKind:null==(this.nextToken=this.token.next)?(this.token.next=this.tm.getNextToken(),this.nextTokenKind=this.token.next.kind):nextTokenKind=nextToken.kind},consumeToken:function(t){return old=this.token,null!=this.token.next?this.token=this.token.next:this.token=this.token.next=this.tm.getNextToken(),this.nextTokenKind=-1,this.token.kind==t?this.token:(this.token=old,this.token)},getToken:function(o){t=this.lookingAhead?this.scanPosition:this.token;for(var e=0;o>e;e++)null!=t.next?t=t.next:t=t.next=this.tm.getNextToken();return t}},koara.Token=function(){},koara.Token.prototype={constructor:koara.Token},koara.TokenManager=function(t){this.EOF=0,this.ASTERISK=1,this.BACKSLASH=2,this.BACKTICK=3,this.CHAR_SEQUENCE=4,this.COLON=5,this.DASH=6,this.DIGITS=7,this.DOT=8,this.EQ=10,this.ESCAPED_CHAR=11,this.GT=12,this.IMAGE_LABEL=13,this.LBRACK=14,this.LPAREN=15,this.LT=16,this.RBRACK=17,this.RPAREN=18,this.SPACE=19,this.TAB=20,this.UNDERSCORE=21,this.cs=t,this.jjrounds=[],this.jjstateSet=[],this.jjnextStates=[2,3,5]},koara.TokenManager.prototype={constructor:koara.TokenManager,EOL:9,getNextToken:function(){try{for(curPos=0;;)try{curChar=this.cs.beginToken()}catch(t){return this.matchedKind=0,this.matchedPos=-1,this.fillToken()}}catch(t){return null}}},koara.TreeState=function(){this.nodes=[],this.marks=[],this.nodesOnStack=0,this.currentMark=0},koara.TreeState.prototype={constructor:koara.TreeState,openScope:function(){this.marks.push(this.currentMark),this.currentMark=this.nodesOnStack},closeScope:function(t){for(a=this.nodeArity(),this.currentMark=marks.pop();a-- >0;)c=this.popNode(),c.setParent(t),t.add(c,a);this.pushNode(t)},addSingleValue:function(t,o){this.openScope(),t.setValue(o.image),this.closeScope(t)},nodeArity:function(){return this.nodesOnStack-this.currentMark},popNode:function(){return--nodesOnStack,nodes.pop()},pushNode:function(t){this.nodes.add(t),++this.nodesOnStack}};
//# sourceMappingURL=koara.min.js.map
