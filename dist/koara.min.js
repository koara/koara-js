!function(i){function s(){this.children=[]}function e(){s.call(this)}function n(){s.call(this)}function h(){n.call(this)}function o(){n.call(this)}function a(t){n.call(this),this.ordered=t}function r(){s.call(this)}function m(){}function u(){s.call(this)}function k(){s.call(this)}function l(){s.call(this)}function d(){s.call(this)}function T(){n.call(this)}function A(){s.call(this)}function f(){n.call(this)}function E(){s.call(this)}function C(t){this.available=4096,this.bufsize=4096,this.tokenBegin=0,this.bufcolumn=[],this.bufpos=-1,this.bufline=[],this.column=0,this.line=1,this.prevCharIsLF=!1,this.reader=t,this.buffer=[],this.maxNextCharInd=0,this.inBuf=0,this.tabSize=4}function g(t,i,s,e,n,h){this.kind=t,this.beginLine=i,this.beginColumn=s,this.endLine=e,this.endColumn=n,this.image=h}function S(t){this.cs=t,this.jjrounds=[],this.jjstateSet=[],this.jjnextStates=[2,3,5]}function P(){this.nodes=[],this.marks=[],this.nodesOnStack=0,this.currentMark=0}function p(t){this.index=0,this.text=t}function L(){}function K(){this.lookAheadSuccess=new LookaheadSuccess,this.modules=["paragraphs","headings","lists","links","images","formatting","blockquotes","code"],this.currentBlockLevel=0,this.currentQuoteLevel=0}s.prototype={constructor:s,add:function(t,i){this.children[i]=t},childrenAccept:function(t){for(var i=0;i<this.children.length;i++)this.children[i].accept(t)}},e.prototype=new s,e.prototype.constructor=e,e.prototype.accept=function(t){t.visitDocument(this)},n.prototype=new s,n.prototype.constructor=n,n.prototype.isNested=function(){return!(this.parent instanceof e)},n.prototype.isSingleChild=function(){return 1===this.parent.children.length},n.prototype.accept=function(t){t.visitBlockElement(this)},h.prototype=new n,h.prototype.constructor=h,h.prototype.accept=function(t){t.visitParagraph(this)},o.prototype=new n,o.prototype.constructor=o,o.prototype.accept=function(t){t.visitHeading(this)},a.prototype=new n,a.prototype.constructor=a,a.prototype.accept=function(t){t.visitListBlock(this)},r.prototype=new s,r.prototype.constructor=r,r.prototype.accept=function(t){t.visitListItem(this)},m.prototype=new s,m.prototype.constructor=m,m.prototype.accept=function(t){t.visitLineBreak(this)},u.prototype=new s,u.prototype.constructor=u,u.prototype.accept=function(t){t.visitLink(this)},k.prototype=new s,k.prototype.constructor=k,k.prototype.accept=function(t){t.visitImage(this)},l.prototype=new s,l.prototype.constructor=l,l.prototype.accept=function(t){t.visitStrong(this)},d.prototype=new s,d.prototype.constructor=d,d.prototype.accept=function(t){t.visitEm(this)},T.prototype=new n,T.prototype.constructor=T,T.prototype.accept=function(t){t.visitBlockQuote(this)},A.prototype=new s,A.prototype.constructor=A,A.prototype.accept=function(t){t.visitCode(this)},f.prototype=new n,f.prototype.constructor=f,f.prototype.accept=function(t){t.visitCodeBlock(this)},E.prototype=new s,E.prototype.constructor=E,E.prototype.accept=function(t){t.visitText(this)},C.prototype={constructor:C,beginToken:function(){this.tokenBegin=-1;var t=this.readChar();return this.tokenBegin=this.bufpos,t},readChar:function(){if(this.inBuf>0)return--this.inBuf,++this.bufpos===this.bufsize&&(this.bufpos=0),this.buffer[this.bufpos];++this.bufpos>=this.maxNextCharInd&&this.fillBuff();var t=this.buffer[this.bufpos];return this.updateLineColumn(t),t},fillBuff:function(){this.maxNextCharInd===this.available&&(this.available===this.bufsize?(this.bufpos=0,this.maxNextCharInd=0,this.tokenBegin>2048&&(this.available=this.tokenBegin)):this.available=this.bufsize);var t=0;try{if(-1===(t=this.reader.read(this.buffer,this.maxNextCharInd,this.available-this.maxNextCharInd)))throw new Error("IOException");this.maxNextCharInd+=t}catch(i){throw--this.bufpos,this.backup(0),-1===this.tokenBegin&&(this.tokenBegin=this.bufpos),i}},backup:function(t){this.inBuf+=t,(this.bufpos-=t)<0&&(this.bufpos+=this.bufsize)},updateLineColumn:function(t){switch(this.column++,this.prevCharIsLF&&(this.prevCharIsLF=!1,this.column=1,this.line+=this.column),t){case"\n":this.prevCharIsLF=!0;break;case"	":this.column--,this.column+=this.tabSize-this.column%this.tabSize}this.bufline[this.bufpos]=this.line,this.bufcolumn[this.bufpos]=this.column},getImage:function(){return this.bufpos>=this.tokenBegin?this.buffer.slice(this.tokenBegin,this.bufpos+1).join(""):this.buffer.slice(this.tokenBegin,this.bufsize-this.tokenBegin).join("")+this.buffer.slice(0,this.bufpos+1).join("")},getBeginColumn:function(){return this.bufpos in this.bufcolumn?this.bufcolumn[this.bufpos]:0},getBeginLine:function(){return this.bufpos in this.bufline?this.bufline[this.bufpos]:0},getEndColumn:function(){return this.tokenBegin in this.bufcolumn?this.bufcolumn[this.tokenBegin]:0},getEndLine:function(){return this.tokenBegin in this.bufline?this.bufline[this.tokenBegin]:0}},S.prototype={constructor:S,EOF:0,ASTERISK:1,BACKSLASH:2,BACKTICK:3,CHAR_SEQUENCE:4,COLON:5,DASH:6,DIGITS:7,DOT:8,EOL:9,EQ:10,ESCAPED_CHAR:11,GT:12,IMAGE_LABEL:13,LBRACK:14,LPAREN:15,LT:16,RBRACK:17,RPAREN:18,SPACE:19,TAB:20,UNDERSCORE:21,getNextToken:function(){try{for(var t=0;;){try{this.curChar=this.cs.beginToken()}catch(i){return this.matchedKind=0,this.matchedPos=-1,this.fillToken()}if(this.matchedKind=2147483647,this.matchedPos=0,t=this.moveStringLiteralDfa0(),2147483647!==this.matchedKind)return this.matchedPos+1<t&&this.cs.backup(t-this.matchedPos-1),this.fillToken()}}catch(i){return null}},fillToken:function(){return new g(this.matchedKind,this.cs.getBeginLine(),this.cs.getBeginColumn(),this.cs.getEndLine(),this.cs.getEndColumn(),this.cs.getImage())},moveStringLiteralDfa0:function(){switch(this.curChar.charCodeAt(0)){case 9:return this.startNfaWithStates(0,this.TAB,8);case 32:return this.startNfaWithStates(0,this.SPACE,8);case 40:return this.stopAtPos(0,this.LPAREN);case 41:return this.stopAtPos(0,this.RPAREN);case 42:return this.stopAtPos(0,this.ASTERISK);case 45:return this.stopAtPos(0,this.DASH);case 46:return this.stopAtPos(0,this.DOT);case 58:return this.stopAtPos(0,this.COLON);case 60:return this.stopAtPos(0,this.LT);case 61:return this.stopAtPos(0,this.EQ);case 62:return this.stopAtPos(0,this.GT);case 73:return this.moveStringLiteralDfa1(8192);case 91:return this.stopAtPos(0,this.LBRACK);case 92:return this.startNfaWithStates(0,this.BACKSLASH,7);case 93:return this.stopAtPos(0,this.RBRACK);case 95:return this.stopAtPos(0,this.UNDERSCORE);case 96:return this.stopAtPos(0,this.BACKTICK);case 105:return this.moveStringLiteralDfa1(8192);default:return this.moveNfa(6,0)}},startNfaWithStates:function(t,i,s){this.matchedKind=i,this.matchedPos=t;try{this.curChar=this.cs.readChar()}catch(e){return t+1}return this.moveNfa(s,t+1)},stopAtPos:function(t,i){return this.matchedKind=i,this.matchedPos=t,t+1},moveStringLiteralDfa1:function(t){return this.curChar=this.cs.readChar(),77===this.curChar.charCodeAt(0)||109===this.curChar.charCodeAt(0)?this.moveStringLiteralDfa2(t,8192):this.startNfa(0,t)},moveStringLiteralDfa2:function(t,i){return this.curChar=this.cs.readChar(),65===this.curChar.charCodeAt(0)||97===this.curChar.charCodeAt(0)?this.moveStringLiteralDfa3(i,8192):this.startNfa(1,i)},moveStringLiteralDfa3:function(t,i){return this.curChar=this.cs.readChar(),71===this.curChar.charCodeAt(0)||103===this.curChar.charCodeAt(0)?this.moveStringLiteralDfa4(i,8192):this.startNfa(2,i)},moveStringLiteralDfa4:function(t,i){return this.curChar=this.cs.readChar(),69===this.curChar.charCodeAt(0)||101===this.curChar.charCodeAt(0)?this.moveStringLiteralDfa5(i,8192):this.startNfa(3,i)},moveStringLiteralDfa5:function(t,i){return this.curChar=this.cs.readChar(),58===this.curChar.charCodeAt(0)&&0!==(8192&i)?this.stopAtPos(5,13):this.startNfa(4,i)},startNfa:function(t,i){return this.moveNfa(this.stopStringLiteralDfa(t,i),t+1)},moveNfa:function(t,i){this.jjnewStateCnt=8,this.jjstateSet[0]=t;for(var s=0,e=1,n=null,h=2147483647;;){if(2147483647===++this.round&&(this.round=2147483649),this.curChar.charCodeAt(0)<64){n=1*Number(Math.pow(2,this.curChar.charCodeAt(0)));do switch(this.jjstateSet[--e]){case 6:0!==this.bitwise64(0x880098feffffd800,n)?(h>4&&(h=4),this.checkNAdd(0)):0!==this.bitwise64(0x3ff000000000000,n)?(h>7&&(h=7),this.checkNAdd(1)):0!==this.bitwise64(9216,n)?h>9&&(h=9):0!==this.bitwise64(4294967808,n)&&this.checkNAddStates(0,2),13===this.curChar.charCodeAt(0)&&(this.jjstateSet[this.jjnewStateCnt++]=4);break;case 8:0!==this.bitwise64(9216,n)?h>9&&(h=9):0!==this.bitwise64(4294967808,n)&&this.checkNAddStates(0,2),13===this.curChar.charCodeAt(0)&&(this.jjstateSet[this.jjnewStateCnt++]=4);break;case 0:0!==this.bitwise64(0x880098feffffd800,n)&&(h=4,this.checkNAdd(0));break;case 1:0!==this.bitwise64(0x3ff000000000000,n)&&(h>7&&(h=7),this.checkNAdd(1));break;case 2:0!==this.bitwise64(4294967808,n)&&this.checkNAddStates(0,2);break;case 3:0!==this.bitwise64(9216,n)&&h>9&&(h=9);break;case 4:10===this.curChar.charCodeAt(0)&&h>9&&(h=9);break;case 5:13===this.curChar.charCodeAt(0)&&(this.jjstateSet[this.jjnewStateCnt++]=4);break;case 7:0!==this.bitwise64(0x77ff670000000000,n)&&h>11&&(h=11)}while(e!==s)}else if(this.curChar.charCodeAt(0)<128){n=1*Number(Math.pow(2,this.bitwise64(this.curChar.charCodeAt(0),63)));do switch(this.jjstateSet[--e]){case 6:0!==n?(h>4&&(h=4),this.checkNAdd(0)):92===this.curChar.charCodeAt(0)&&(this.jjstateSet[this.jjnewStateCnt++]=7);break;case 0:0!==this.bitwise64(0xfffffffe48000000,n)&&(h=4,this.checkNAdd(0));break;case 7:0!==this.bitwise64(7381975040,n)&&h>11&&(h=11)}while(e!==s)}else do switch(this.jjstateSet[--e]){case 6:case 0:h>4&&(h=4),this.checkNAdd(0)}while(e!==s);if(2147483647!==h&&(this.matchedKind=h,this.matchedPos=i,h=2147483647),++i,(e=this.jjnewStateCnt)===(s=8-(this.jjnewStateCnt=s)))return i;try{this.curChar=this.cs.readChar()}catch(o){return i}}},checkNAddStates:function(t,i){do this.checkNAdd(this.jjnextStates[t]);while(t++!==i)},checkNAdd:function(t){this.jjrounds[t]!==this.round&&(this.jjstateSet[this.jjnewStateCnt++]=t,this.jjrounds[t]=this.round)},stopStringLiteralDfa:function(t,i){if(0===t){if(0!==this.bitwise64(i,8192))return this.matchedKind=4,0;if(0!==this.bitwise64(i,1572864))return 8;if(0!==this.bitwise64(i,4))return 7}else{if(1===t&&0!==this.bitwise64(i,8192))return this.matchedKind=4,this.matchedPos=1,0;if(2===t&&0!==this.bitwise64(i,8192))return this.matchedKind=4,this.matchedPos=2,0;if(3===t&&0!==this.bitwise64(i,8192))return this.matchedKind=4,this.matchedPos=3,0;if(4===t&&0!==this.bitwise64(i,8192))return this.matchedKind=4,this.matchedPos=4,0}return-1},bitwise64:function(t,i){for(var s=1<<30,e=~(-1<<30),n=0,h=0;0!==t&&0!==i;){var o=e&t&(e&i);t=Math.floor(t/s),i=Math.floor(i/s);for(var a=h++;a--;)o*=s;n+=o}return n}},P.prototype={constructor:P,openScope:function(){this.marks.push(this.currentMark),this.currentMark=this.nodesOnStack},closeScope:function(t){var i=this.nodeArity();for(this.currentMark=this.marks.pop();i-- >0;)c=this.popNode(),c.parent=t,t.add(c,i);this.pushNode(t)},addSingleValue:function(t,i){this.openScope(),t.value=i.image,this.closeScope(t)},nodeArity:function(){return this.nodesOnStack-this.currentMark},popNode:function(){return--this.nodesOnStack,this.nodes.pop()},pushNode:function(t){this.nodes.push(t),++this.nodesOnStack}},LookaheadSuccess=function(){},p.prototype={constructor:p,read:function(t,i,s){if(this.text.toString().substring(this.index).length>0){for(var e=0,n=0;s>n;n++){var h=this.index+n,o=this.text.toString().substring(h,h+1);""!==o&&(t[i+n]=o,e++)}return this.index+=s,e}return-1}},L.prototype={constructor:L,visitDocument:function(t){this.out="",this.level=0,this.listSequence=[],t.childrenAccept(this)},visitHeading:function(t){this.out+=this.indent()+"<h"+t.value+">",t.childrenAccept(this),this.out+="</h"+t.value+">\n",t.isNested()||(this.out+="\n")},visitBlockQuote:function(t){this.out+=this.indent()+"<blockquote>",t.children&&t.children.length>0&&(this.out+="\n"),this.level++,t.childrenAccept(this),this.level--,this.out+=this.indent()+"</blockquote>\n",t.isNested()||(this.out+="\n")},visitListBlock:function(t){this.listSequence.push(0);var i=t.ordered?"ol":"ul";this.out+=this.indent()+"<"+i+">\n",this.level++,t.childrenAccept(this),this.level--,this.out+=this.indent()+"</"+i+">\n",t.isNested()||(this.out+="\n"),this.listSequence.pop()},visitListItem:function(t){var i=Number(this.listSequence[this.listSequence.length-1])+1;if(this.listSequence[this.listSequence.length-1]=i,this.out+=this.indent()+"<li",t.number&&i!==t.number&&(this.out+=' value="'+t.number+'"',this.listSequence.push(t.number)),this.out+=">",t.children&&t.children.length>0){var s="Paragraph"===t.children[0].constructor.name||"BlockElement"===t.children[0].constructor.name;(t.children.length>1||!s)&&(this.out+="\n"),this.level++,t.childrenAccept(this),this.level--,(t.children.length>1||!s)&&(this.out+=this.indent())}this.out+="</li>\n"},visitCodeBlock:function(t){this.out+=this.indent()+"<pre><code",t.language&&(this.out+=' class="language-'+this.escape(t.language)+'"'),this.out+=">",this.out+=this.escape(t.value)+"</code></pre>\n",t.isNested()||(this.out+="\n")},visitParagraph:function(t){t.isNested()&&t.parent instanceof r&&t.isSingleChild()?t.childrenAccept(this):(this.out+=this.indent()+"<p>",t.childrenAccept(this),this.out+="</p>\n",t.isNested()||(this.out+="\n"))},visitImage:function(t){this.out+='<img src="'+this.escapeUrl(t.value)+'" alt="',t.childrenAccept(this),this.out+='" />'},visitLink:function(t){this.out+='<a href="'+this.escapeUrl(t.value.toString())+'">',t.childrenAccept(this),this.out+="</a>"},visitStrong:function(t){this.out+="<strong>",t.childrenAccept(this),this.out+="</strong>"},visitEm:function(t){this.out+="<em>",t.childrenAccept(this),this.out+="</em>"},visitCode:function(t){this.out+="<code>",t.childrenAccept(this),this.out+="</code>"},visitText:function(t){this.out+=this.escape(t.value)},visitLineBreak:function(t){this.out+="<br>\n"+this.indent(),t.childrenAccept(this)},escapeUrl:function(t){return t.replace(/ /gm,"%20").replace(/\"/gm,"%22").replace(/`/gm,"%60").replace(/</gm,"%3C").replace(/>/gm,"%3E").replace(/\[/gm,"%5B").replace(/\]/gm,"%5D").replace(/\\/gm,"%5C")},indent:function(){for(var t=2*this.level,i="",s=t-1;s>=0;s--)i+=" ";return i},escape:function(t){return t.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/\"/gm,"&quot;")},getOutput:function(){return this.out.trim()}},K.prototype={constructor:K,parse:function(t){return this.parseReader(new p(t))},parseReader:function(t){this.cs=new C(t),this.tm=new S(this.cs),this.token=new g,this.tree=new P,this.nextTokenKind=-1;var i=new e;for(this.tree.openScope();this.getNextTokenKind()===this.tm.EOL;)this.consumeToken(this.tm.EOL);if(this.whiteSpace(),this.hasAnyBlockElementsAhead()){for(this.blockElement();this.blockAhead(0);){for(;this.getNextTokenKind()===this.tm.EOL;)this.consumeToken(this.tm.EOL),this.whiteSpace();this.blockElement()}for(;this.getNextTokenKind()===this.tm.EOL;)this.consumeToken(this.tm.EOL);this.whiteSpace()}return this.consumeToken(this.tm.EOF),this.tree.closeScope(i),i},blockElement:function(){this.currentBlockLevel++,this.modules.indexOf("headings")>=0&&this.headingAhead(1)?this.heading():this.modules.indexOf("blockquotes")>=0&&this.getNextTokenKind()===this.tm.GT?this.blockQuote():this.modules.indexOf("lists")>=0&&this.getNextTokenKind()===this.tm.DASH?this.unorderedList():this.modules.indexOf("lists")>=0&&this.hasOrderedListAhead()?this.orderedList():this.modules.indexOf("code")>=0&&this.hasFencedCodeBlockAhead()?this.fencedCodeBlock():this.paragraph(),this.currentBlockLevel--},heading:function(){var t=new o;this.tree.openScope();for(var i=0;this.getNextTokenKind()===this.tm.EQ;)this.consumeToken(this.tm.EQ),i++;for(this.whiteSpace();this.headingHasInlineElementsAhead();)this.hasTextAhead()?this.text():this.modules.indexOf("images")>=0&&this.hasImageAhead()?this.image():this.modules.indexOf("links")>=0&&this.hasLinkAhead()?this.link():this.modules.indexOf("formatting")>=0&&this.hasStrongAhead()?this.strong():this.modules.indexOf("formatting")>=0&&this.hasEmAhead()?this.em():this.modules.indexOf("code")>=0&&this.hasCodeAhead()?this.code():this.looseChar();t.value=i,this.tree.closeScope(t)},blockQuote:function(){var t=new T;for(this.tree.openScope(),this.currentQuoteLevel++,this.consumeToken(this.tm.GT);this.blockQuoteHasEmptyLineAhead();)this.blockQuoteEmptyLine();if(this.whiteSpace(),this.blockQuoteHasAnyBlockElementseAhead())for(this.blockElement();this.blockAhead(0);){for(;this.getNextTokenKind()===this.tm.EOL;)this.consumeToken(EOL),this.whiteSpace(),this.blockQuotePrefix();this.blockElement()}for(;this.hasBlockQuoteEmptyLinesAhead();)this.blockQuoteEmptyLine();this.currentQuoteLevel--,this.tree.closeScope(t)},blockQuotePrefix:function(){var t=0;do this.consumeToken(this.tm.GT),this.whiteSpace();while(++t<this.currentQuoteLevel)},blockQuoteEmptyLine:function(){this.consumeToken(this.tm.EOL),this.whiteSpace();do this.consumeToken(this.tm.GT),this.whiteSpace();while(this.getNextTokenKind()===this.tm.GT)},unorderedList:function(){var t=new a(!1);this.tree.openScope();for(var i=this.unorderedListItem();this.listItemAhead(i,!1);){for(;this.getNextTokenKind()===this.tm.EOL;)this.consumeToken(this.tm.EOL);this.whiteSpace(),this.currentQuoteLevel>0&&this.blockQuotePrefix(),this.unorderedListItem()}this.tree.closeScope(t)},unorderedListItem:function(){var t=new r;this.tree.openScope();var i=this.consumeToken(this.tm.DASH);if(this.whiteSpace(),this.listItemHasInlineElements())for(this.blockElement();this.blockAhead(i.beginColumn);){for(;this.getNextTokenKind()===this.tm.EOL;)this.consumeToken(this.tm.EOL),this.whiteSpace(),this.currentQuoteLevel>0&&this.blockQuotePrefix();this.blockElement()}return this.tree.closeScope(t),i.beginColumn},orderedList:function(){var t=new a(!0);this.tree.openScope();for(var i=this.orderedListItem();this.listItemAhead(i,!0);){for(;this.getNextTokenKind()===this.tm.EOL;)this.consumeToken(this.tm.EOL);this.whiteSpace(),this.currentQuoteLevel>0&&this.blockQuotePrefix(),this.orderedListItem()}this.tree.closeScope(t)},orderedListItem:function(){var t=new r;this.tree.openScope();var i=this.consumeToken(this.tm.DIGITS);if(this.consumeToken(this.tm.DOT),this.whiteSpace(),this.listItemHasInlineElements())for(this.blockElement();this.blockAhead(i.beginColumn);){for(;this.getNextTokenKind()===this.tm.EOL;)this.consumeToken(this.tm.EOL),this.whiteSpace(),this.currentQuoteLevel>0&&this.blockQuotePrefix();this.blockElement()}return t.number=i.image,this.tree.closeScope(t),i.beginColumn},fencedCodeBlock:function(){var t=new f,i="";this.tree.openScope();var s=this.consumeToken(this.tm.BACKTICK).beginColumn;do this.consumeToken(this.tm.BACKTICK);while(this.getNextTokenKind()===this.tm.BACKTICK);for(this.whiteSpace(),this.getNextTokenKind()===this.tm.CHAR_SEQUENCE&&(t.language=this.codeLanguage()),this.getNextTokenKind()===this.tm.EOF||this.fencesAhead()||(this.consumeToken(this.tm.EOL),this.levelWhiteSpace(s));this.getNextTokenKind()!==this.tm.EOF&&(this.getNextTokenKind()!==this.tm.EOL||!this.fencesAhead());)switch(this.getNextTokenKind()){case this.tm.CHAR_SEQUENCE:i+=this.consumeToken(this.tm.CHAR_SEQUENCE).image;break;case this.tm.ASTERISK:i+=this.consumeToken(this.tm.ASTERISK).image;break;case this.tm.BACKSLASH:i+=this.consumeToken(this.tm.BACKSLASH).image;break;case this.tm.COLON:i+=this.consumeToken(this.tm.COLON).image;break;case this.tm.DASH:i+=this.consumeToken(this.tm.DASH).image;break;case this.tm.DIGITS:i+=this.consumeToken(this.tm.DIGITS).image;break;case this.tm.DOT:i+=this.consumeToken(this.tm.DOT).image;break;case this.tm.EQ:i+=this.consumeToken(this.tm.EQ).image;break;case this.tm.ESCAPED_CHAR:i+=this.consumeToken(this.tm.ESCAPED_CHAR).image;break;case this.tm.IMAGE_LABEL:i+=this.consumeToken(this.tm.IMAGE_LABEL).image;break;case this.tm.LT:i+=this.consumeToken(this.tm.LT).image;break;case this.tm.GT:i+=this.consumeToken(this.tm.GT).image;break;case this.tm.LBRACK:i+=this.consumeToken(this.tm.LBRACK).image;break;case this.tm.RBRACK:i+=this.consumeToken(this.tm.RBRACK).image;break;case this.tm.LPAREN:i+=this.consumeToken(this.tm.LPAREN).image;break;case this.tm.RPAREN:i+=this.consumeToken(this.tm.RPAREN).image;break;case this.tm.UNDERSCORE:i+=this.consumeToken(this.tm.UNDERSCORE).image;break;case this.tm.BACKTICK:i+=this.consumeToken(this.tm.BACKTICK).image;break;default:if(this.nextAfterSpace([this.tm.EOL,this.tm.EOF]))this.fencesAhead()||(this.consumeToken(this.tm.EOL),i+="\n",this.levelWhiteSpace(this.beginColumn));else switch(this.getNextTokenKind()){case this.tm.SPACE:i+=this.consumeToken(this.tm.SPACE).image;break;case this.tm.TAB:this.consumeToken(this.tm.TAB),i+="    "}}if(this.fencesAhead())for(this.consumeToken(this.tm.EOL),this.whiteSpace();this.getNextTokenKind()===this.tm.BACKTICK;)this.consumeToken(this.tm.BACKTICK);t.value=i.toString(),this.tree.closeScope(t)},paragraph:function(){var t=this.modules.indexOf("paragraphs")>=0?new h:new n;for(this.tree.openScope(),this.inline();this.textAhead();){if(this.lineBreak(),this.whiteSpace(),this.modules.indexOf("blockquotes")>=0)for(;this.getNextTokenKind()===this.tm.GT;)this.consumeToken(this.tm.GT),this.whiteSpace();this.inline()}this.tree.closeScope(t)},text:function(){var t=new E,i="";for(this.tree.openScope();this.textHasTokensAhead();)switch(this.getNextTokenKind()){case this.tm.CHAR_SEQUENCE:i+=this.consumeToken(this.tm.CHAR_SEQUENCE).image;break;case this.tm.BACKSLASH:i+=this.consumeToken(this.tm.BACKSLASH).image;break;case this.tm.COLON:i+=this.consumeToken(this.tm.COLON).image;break;case this.tm.DASH:i+=this.consumeToken(this.tm.DASH).image;break;case this.tm.DIGITS:i+=this.consumeToken(this.tm.DIGITS).image;break;case this.tm.DOT:i+=this.consumeToken(this.tm.DOT).image;break;case this.tm.EQ:i+=this.consumeToken(this.tm.EQ).image;break;case this.tm.ESCAPED_CHAR:i+=this.consumeToken(this.tm.ESCAPED_CHAR).image.substring(1);break;case this.tm.GT:i+=this.consumeToken(this.tm.GT).image;break;case this.tm.IMAGE_LABEL:i+=this.consumeToken(this.tm.IMAGE_LABEL).image;break;case this.tm.LPAREN:i+=this.consumeToken(this.tm.LPAREN).image;break;case this.tm.LT:i+=this.consumeToken(this.tm.LT).image;break;case this.tm.RBRACK:i+=this.consumeToken(this.tm.RBRACK).image;break;case this.tm.RPAREN:i+=this.consumeToken(this.tm.RPAREN).image;break;default:if(!this.nextAfterSpace([this.tm.EOL,this.tm.EOF]))switch(this.getNextTokenKind()){case this.tm.SPACE:i+=this.consumeToken(this.tm.SPACE).image;break;case this.tm.TAB:this.consumeToken(this.tm.TAB),i+="    "}}t.value=i,this.tree.closeScope(t)},image:function(){var t=new k,i="";for(this.tree.openScope(),this.consumeToken(this.tm.LBRACK),this.whiteSpace(),this.consumeToken(this.tm.IMAGE_LABEL),this.whiteSpace();this.imageHasAnyElements();)this.hasTextAhead()?this.resourceText():this.looseChar();this.whiteSpace(),this.consumeToken(this.tm.RBRACK),this.hasResourceUrlAhead()&&(i=this.resourceUrl()),t.value=i,this.tree.closeScope(t)},link:function(){var t=new u,i="";for(this.tree.openScope(),this.consumeToken(this.tm.LBRACK),this.whiteSpace();this.linkHasAnyElements();)this.modules.indexOf("images")>=0&&this.hasImageAhead()?this.image():this.modules.indexOf("formatting")>=0&&this.hasStrongAhead()?this.strong():this.modules.indexOf("formatting")>=0&&this.hasEmAhead()?this.em():this.modules.indexOf("code")>=0&&this.hasCodeAhead()?this.code():this.hasResourceTextAhead()?this.resourceText():this.looseChar();this.whiteSpace(),this.consumeToken(this.tm.RBRACK),this.hasResourceUrlAhead()&&(i=this.resourceUrl()),t.value=i,this.tree.closeScope(t)},strong:function(){var t=new l;for(this.tree.openScope(),this.consumeToken(this.tm.ASTERISK);this.strongHasElements();)if(this.hasTextAhead())this.text();else if(this.modules.indexOf("images")>=0&&this.hasImage())this.image();else if(this.modules.indexOf("links")>=0&&this.hasLinkAhead())this.link();else if(this.modules.indexOf("code")>=0&&this.multilineAhead(this.tm.BACKTICK))this.codeMultiline();else if(this.strongEmWithinStrongAhead())this.emWithinStrong();else switch(this.getNextTokenKind()){case this.tm.BACKTICK:this.tree.addSingleValue(new E,this.consumeToken(this.tm.BACKTICK));break;case this.tm.LBRACK:this.tree.addSingleValue(new E,this.consumeToken(this.tm.LBRACK));break;case this.tm.UNDERSCORE:this.tree.addSingleValue(new E,this.consumeToken(this.tm.UNDERSCORE))}this.consumeToken(this.tm.ASTERISK),this.tree.closeScope(t)},em:function(){var t=new d;for(this.tree.openScope(),this.consumeToken(this.tm.UNDERSCORE);this.emHasElements();)if(this.hasTextAhead())this.text();else if(this.modules.indexOf("images")>=0&&this.hasImage())this.image();else if(this.modules.indexOf("links")>=0&&this.hasLinkAhead())this.link();else if(this.modules.indexOf("code")>=0&&this.hasCodeAhead())this.code();else if(this.emHasStrongWithinEm())this.strongWithinEm();else switch(this.getNextTokenKind()){case this.tm.ASTERISK:this.tree.addSingleValue(new E,this.consumeToken(this.tm.ASTERISK));break;case this.tm.BACKTICK:this.tree.addSingleValue(new E,this.consumeToken(this.tm.BACKTICK));break;case this.tm.LBRACK:this.tree.addSingleValue(new E,this.consumeToken(this.tm.LBRACK))}this.consumeToken(this.tm.UNDERSCORE),this.tree.closeScope(t)},code:function(){var t=new A;this.tree.openScope(),this.consumeToken(this.tm.BACKTICK),this.codeText(),this.consumeToken(this.tm.BACKTICK),this.tree.closeScope(t)},codeText:function(){var t=new E,i="";this.tree.openScope();do switch(this.getNextTokenKind()){case this.tm.CHAR_SEQUENCE:i+=this.consumeToken(this.tm.CHAR_SEQUENCE).image;break;case this.tm.ASTERISK:i+=this.consumeToken(this.tm.ASTERISK).image;break;case this.tm.BACKSLASH:i+=this.consumeToken(this.tm.BACKSLASH).image;break;case this.tm.COLON:i+=this.consumeToken(this.tm.COLON).image;break;case this.tm.DASH:i+=this.consumeToken(this.tm.DASH).image;break;case this.tm.DIGITS:i+=this.consumeToken(this.tm.DIGITS).image;break;case this.tm.DOT:i+=this.consumeToken(this.tm.DOT).image;break;case this.tm.EQ:i+=this.consumeToken(this.tm.EQ).image;break;case this.tm.ESCAPED_CHAR:i+=this.consumeToken(this.tm.ESCAPED_CHAR).image;break;case this.tm.IMAGE_LABEL:i+=this.consumeToken(this.tm.IMAGE_LABEL).image;break;case this.tm.LT:i+=this.consumeToken(this.tm.LT).image;break;case this.tm.LBRACK:i+=this.consumeToken(this.tm.LBRACK).image;break;case this.tm.RBRACK:i+=this.consumeToken(this.tm.RBRACK).image;break;case this.tm.LPAREN:i+=this.consumeToken(this.tm.LPAREN).image;break;case this.tm.GT:i+=this.consumeToken(this.tm.GT).image;break;case this.tm.RPAREN:i+=this.consumeToken(this.tm.RPAREN).image;break;case this.tm.UNDERSCORE:i+=this.consumeToken(this.tm.UNDERSCORE).image;break;default:if(!this.nextAfterSpace([this.tm.EOL,this.tm.EOF]))switch(this.getNextTokenKind()){case this.tm.SPACE:i+=this.consumeToken(this.tm.SPACE).image;break;case this.tm.TAB:this.consumeToken(this.tm.TAB),i+="    "}}while(this.codeTextHasAnyTokenAhead());t.value=i,this.tree.closeScope(t)},looseChar:function(){var t=new E;switch(this.tree.openScope(),this.getNextTokenKind()){case this.tm.ASTERISK:t.value=this.consumeToken(this.tm.ASTERISK).image;break;case this.tm.BACKTICK:t.value=this.consumeToken(this.tm.BACKTICK).image;break;case this.tm.LBRACK:t.value=this.consumeToken(this.tm.LBRACK).image;break;case this.tm.UNDERSCORE:t.value=this.consumeToken(this.tm.UNDERSCORE).image}this.tree.closeScope(t)},lineBreak:function(){var t=new m;for(this.tree.openScope();this.getNextTokenKind()===this.tm.SPACE||this.getNextTokenKind()===this.tm.TAB;)this.consumeToken(this.getNextTokenKind());this.consumeToken(this.tm.EOL),this.tree.closeScope(t)},levelWhiteSpace:function(t){for(var i=1;this.getNextTokenKind()===this.tm.GT;)this.consumeToken(this.getNextTokenKind());for(;(this.getNextTokenKind()===this.tm.SPACE||this.getNextTokenKind()===this.tm.TAB)&&t-1>i;)i=this.consumeToken(this.getNextTokenKind()).beginColumn},codeLanguage:function(){var t="";do switch(this.getNextTokenKind()){case this.tm.CHAR_SEQUENCE:t+=this.consumeToken(this.tm.CHAR_SEQUENCE).image;break;case this.tm.ASTERISK:t+=this.consumeToken(this.tm.ASTERISK).image;break;case this.tm.BACKSLASH:t+=this.consumeToken(this.tm.BACKSLASH).image;break;case this.tm.ACKTICK:t+=this.consumeToken(this.tm.BACKTICK).image;break;case this.tm.COLON:t+=this.consumeToken(this.tm.COLON).image;break;case this.tm.DASH:t+=this.consumeToken(this.tm.DASH).image;break;case this.tm.DIGITS:t+=this.consumeToken(this.tm.DIGITS).image;break;case this.tm.DOT:t+=this.consumeToken(this.tm.DOT).imagec;break;case this.tm.EQ:t+=this.consumeToken(this.tm.EQ).image;break;case this.tm.ESCAPED_CHAR:t+=this.consumeToken(this.tm.ESCAPED_CHAR).image;break;case this.tm.IMAGE_LABEL:t+=this.consumeToken(this.tm.IMAGE_LABEL).image;break;case this.tm.LT:t+=this.consumeToken(this.tm.LT).image;break;case this.tm.GT:t+=this.consumeToken(this.tm.GT).image;break;case this.tm.LBRACK:t+=this.consumeToken(this.tm.LBRACK).image;break;case this.tm.RBRACK:t+=this.consumeToken(this.tm.RBRACK).image;break;case this.tm.LPAREN:t+=this.consumeToken(this.tm.LPAREN).image;break;case this.tm.RPAREN:t+=this.consumeToken(this.tm.RPAREN).image;break;case this.tm.UNDERSCORE:t+=this.consumeToken(this.tm.UNDERSCORE).image;break;case this.tm.SPACE:t+=this.consumeToken(this.tm.SPACE).image;break;case this.tm.TAB:t+="    "}while(this.getNextTokenKind()!==this.tm.EOL&&this.getNextTokenKind()!==this.tm.EOF);return t},inline:function(){do this.hasInlineTextAhead()?this.text():this.modules.indexOf("images")>=0&&this.hasImageAhead()?this.image():this.modules.indexOf("links")>=0&&this.hasLinkAhead()?this.link():this.modules.indexOf("formatting")>=0&&this.multilineAhead(this.tm.ASTERISK)?this.strongMultiline():this.modules.indexOf("formatting")>=0&&this.multilineAhead(this.tm.UNDERSCORE)?this.emMultiline():this.modules.indexOf("code")>=0&&this.multilineAhead(this.tm.BACKTICK)?this.codeMultiline():this.looseChar();while(this.hasInlineElementAhead())},resourceText:function(){this.tree.openScope();var t=new E,i="";do switch(this.getNextTokenKind()){case this.tm.CHAR_SEQUENCE:i+=this.consumeToken(this.tm.CHAR_SEQUENCE).image;break;case this.tm.BACKSLASH:i+=this.consumeToken(this.tm.BACKSLASH).image;break;case this.tm.COLON:i+=this.consumeToken(this.tm.COLON).image;break;case this.tm.DASH:i+=this.consumeToken(this.tm.DASH).image;break;case this.tm.DIGITS:i+=this.consumeToken(this.tm.DIGITS).image;break;case this.tm.DOT:i+=this.consumeToken(this.tm.DOT).image;break;case this.tm.EQ:i+=this.consumeToken(this.tm.EQ).image;break;case this.tm.ESCAPED_CHAR:i+=this.consumeToken(this.tm.ESCAPED_CHAR).image.substring(1);break;case this.tm.IMAGE_LABEL:i+=this.consumeToken(this.tm.IMAGE_LABEL).image;break;case this.tm.GT:i+=this.consumeToken(this.tm.GT).image;break;case this.tm.LPAREN:i+=this.consumeToken(this.tm.LPAREN).image;break;case this.tm.LT:i+=this.consumeToken(this.tm.LT).image;break;case this.tm.RPAREN:i+=this.consumeToken(this.tm.RPAREN).image;break;default:if(!this.nextAfterSpace([this.tm.RBRACK]))switch(this.getNextTokenKind()){case this.tm.SPACE:i+=this.consumeToken(this.tm.SPACE).image;break;case this.tm.TAB:this.consumeToken(this.tm.TAB),i+="    "}}while(this.resourceHasElementAhead());t.value=i,this.tree.closeScope(t)},resourceUrl:function(){this.consumeToken(this.tm.LPAREN),this.whiteSpace();var t=this.resourceUrlText();return this.whiteSpace(),this.consumeToken(this.tm.RPAREN),t},resourceUrlText:function(){for(var t="";this.resourceTextHasElementsAhead();)switch(this.getNextTokenKind()){case this.tm.CHAR_SEQUENCE:t+=this.consumeToken(this.tm.CHAR_SEQUENCE).image;break;case this.tm.ASTERISK:t+=this.consumeToken(this.tm.ASTERISK).image;break;case this.tm.BACKSLASH:t+=this.consumeToken(this.tm.BACKSLASH).image;break;case this.tm.BACKTICK:t+=this.consumeToken(this.tm.BACKTICK).image;break;case this.tm.COLON:t+=this.consumeToken(this.tm.COLON).image;break;case this.tm.DASH:t+=this.consumeToken(this.tm.DASH).image;break;case this.tm.DIGITS:
t+=this.consumeToken(this.tm.DIGITS).image;break;case this.tm.DOT:t+=this.consumeToken(this.tm.DOT).image;break;case this.tm.EQ:t+=this.consumeToken(this.tm.EQ).image;break;case this.tm.ESCAPED_CHAR:t+=this.consumeToken(this.tm.ESCAPED_CHAR).image.substring(1);break;case this.tm.IMAGE_LABEL:t+=this.consumeToken(this.tm.IMAGE_LABEL).image;break;case this.tm.GT:t+=this.consumeToken(this.tm.GT).image;break;case this.tm.LBRACK:t+=this.consumeToken(this.tm.LBRACK).image;break;case this.tm.LPAREN:t+=this.consumeToken(this.tm.LPAREN).image;break;case this.tm.LT:t+=this.consumeToken(this.tm.LT).image;break;case this.tm.RBRACK:t+=this.consumeToken(this.tm.RBRACK).image;break;case this.tm.UNDERSCORE:t+=this.consumeToken(this.tm.UNDERSCORE).image;break;default:if(!this.nextAfterSpace([this.tm.RPAREN]))switch(this.getNextTokenKind()){case this.tm.SPACE:t+=this.consumeToken(this.tm.SPACE).image;break;case this.tm.TAB:this.consumeToken(this.tm.TAB),t+="    "}}return t},strongMultiline:function(){var t=new l;for(this.tree.openScope(),this.consumeToken(this.tm.ASTERISK),this.strongMultilineContent();this.textAhead();)this.lineBreak(),this.strongMultilineContent();this.consumeToken(this.tm.ASTERISK),this.tree.closeScope(t)},strongMultilineContent:function(){do if(this.hasTextAhead())this.text();else if(this.modules.indexOf("images")>=0&&this.hasImageAhead())this.image();else if(this.modules.indexOf("links")>=0&&this.hasLinkAhead())this.link();else if(this.modules.indexOf("code")>=0&&this.hasCodeAhead())this.code();else if(this.hasEmWithinStrongMultiline())this.emWithinStrongMultiline();else switch(this.getNextTokenKind()){case this.tm.BACKTICK:this.tree.addSingleValue(new E,this.consumeToken(this.tm.BACKTICK));break;case this.tm.LBRACK:this.tree.addSingleValue(new E,this.consumeToken(this.tm.LBRACK));break;case this.tm.UNDERSCORE:this.tree.addSingleValue(new E,this.consumeToken(this.tm.UNDERSCORE))}while(this.strongMultilineHasElementsAhead())},strongWithinEmMultiline:function(){var t=new l;for(this.tree.openScope(),this.consumeToken(this.tm.ASTERISK),this.strongWithinEmMultilineContent();this.textAhead();)this.lineBreak(),this.strongWithinEmMultilineContent();this.consumeToken(this.tm.ASTERISK),this.tree.closeScope(t)},strongWithinEmMultilineContent:function(){do if(this.hasTextAhead())this.text();else if(this.modules.indexOf("images")>=0&&this.hasImageAhead())this.image();else if(this.modules.indexOf("links")>=0&&this.hasLinkAhead())this.link();else if(this.modules.indexOf("code")>=0&&this.hasCodeAhead())this.code();else switch(this.getNextTokenKind()){case this.tm.BACKTICK:this.tree.addSingleValue(new E,this.consumeToken(this.tm.BACKTICK));break;case this.tm.LBRACK:this.tree.addSingleValue(new E,this.consumeToken(this.tm.LBRACK));break;case this.tm.UNDERSCORE:this.tree.addSingleValue(new E,this.consumeToken(this.tm.UNDERSCORE))}while(this.strongWithinEmMultilineHasElementsAhead())},strongWithinEm:function(){var t=new l;this.tree.openScope(),thiss.consumeToken(this.tm.ASTERISK);do if(this.hasTextAhead())this.text();else if(this.modules.indexOf("images")>=0&&this.hasImageAhead())this.image();else if(this.modules.indexOf("links")>=0&&this.hasLinkAhead())this.link();else if(this.modules.indexOf("code")>=0&&this.hasCodeAhead())this.code();else switch(this.getNextTokenKind()){case this.tm.BACKTICK:this.tree.addSingleValue(new E,this.consumeToken(this.tm.BACKTICK));break;case this.tm.LBRACK:this.tree.addSingleValue(new E,this.consumeToken(this.tm.LBRACK));break;case this.tm.UNDERSCORE:this.tree.addSingleValue(new E,this.consumeToken(this.tm.UNDERSCORE))}while(this.strongWithinEmHasElementsAhead());this.consumeToken(this.tm.ASTERISK),this.tree.closeScope(t)},emMultiline:function(){var t=new d;for(this.tree.openScope(),this.consumeToken(this.tm.UNDERSCORE),this.emMultilineContent();this.textAhead();)this.lineBreak(),this.emMultilineContent();this.consumeToken(this.tm.UNDERSCORE),this.tree.closeScope(t)},emMultilineContent:function(){do if(this.hasTextAhead())this.text();else if(this.modules.indexOf("images")>=0&&this.hasImageAhead())this.image();else if(this.modules.indexOf("links")>=0&&this.hasLinkAhead())this.link();else if(this.modules.indexOf("code")>=0&&this.multilineAhead(this.tm.BACKTICK))this.codeMultiline();else if(this.hasStrongWithinEmMultilineAhead())this.strongWithinEmMultiline();else switch(this.getNextTokenKind()){case this.tm.ASTERISK:this.tree.addSingleValue(new E,this.consumeToken(this.tm.ASTERISK));break;case this.tm.BACKTICK:this.tree.addSingleValue(new E,this.consumeToken(this.tm.BACKTICK));break;case this.tm.LBRACK:this.tree.addSingleValue(new E,this.consumeToken(this.tm.LBRACK))}while(this.emMultilineContentHasElementsAhead())},emWithinStrongMultiline:function(){var t=new d;for(this.tree.openScope(),this.consumeToken(this.tm.UNDERSCORE),this.emWithinStrongMultilineContent();this.textAhead();)this.lineBreak(),this.emWithinStrongMultilineContent();this.consumeToken(this.tm.UNDERSCORE),this.tree.closeScope(t)},emWithinStrongMultilineContent:function(){do if(this.hasTextAhead())this.text();else if(this.modules.indexOf("images")>=0&&this.hasImageAhead())this.image();else if(this.modules.indexOf("links")>=0&&this.hasLinkAhead())this.link();else if(this.modules.indexOf("code")>=0&&this.hasCodeAhead())this.code();else switch(this.getNextTokenKind()){case this.tm.ASTERISK:this.tree.addSingleValue(new E,this.consumeToken(this.tm.ASTERISK));break;case this.tm.BACKTICK:this.tree.addSingleValue(new E,this.consumeToken(this.tm.BACKTICK));break;case this.tm.LBRACK:this.tree.addSingleValue(new E,this.consumeToken(this.tm.LBRACK))}while(this.emWithinStrongMultilineContentHasElementsAhead())},emWithinStrong:function(){var t=new d;this.tree.openScope(),this.consumeToken(this.tm.UNDERSCORE);do if(this.hasTextAhead())this.text();else if(this.modules.indexOf("images")>=0&&this.hasImageAhead())this.image();else if(this.modules.indexOf("links")>=0&&this.hasLinkAhead())this.link();else if(this.modules.indexOf("code")>=0&&this.hasCodeAhead())this.code();else switch(this.getNextTokenKind()){case this.tm.ASTERISK:this.tree.addSingleValue(new E,this.consumeToken(this.tm.ASTERISK));break;case this.tm.BACKTICK:this.tree.addSingleValue(new E,this.consumeToken(this.tm.BACKTICK));break;case this.tm.LBRACK:this.tree.addSingleValue(new E,this.consumeToken(LBRACK))}while(this.emWithinStrongHasElementsAhead());this.consumeToken(this.tm.UNDERSCORE),this.tree.closeScope(t)},codeMultiline:function(){var t=new A;for(this.tree.openScope(),this.consumeToken(this.tm.BACKTICK),this.codeText();this.textAhead();){for(this.lineBreak(),this.whiteSpace();this.getNextTokenKind()===this.tm.GT;)this.consumeToken(this.tm.GT),this.whiteSpace();this.codeText()}this.consumeToken(this.tm.BACKTICK),this.tree.closeScope(t)},whiteSpace:function(){for(;this.getNextTokenKind()===this.tm.SPACE||this.getNextTokenKind()===this.tm.TAB;)this.consumeToken(this.getNextTokenKind())},hasAnyBlockElementsAhead:function(){try{return this.lookAhead=1,this.lastPosition=this.scanPosition=this.token,!this.scanMoreBlockElements()}catch(t){return!0}},blockAhead:function(t){var i=0;if(this.getNextTokenKind()===this.tm.EOL){var s=null,e=2;i=0;do{i=0;do if(s=this.getToken(e++),s.kind===this.tm.GT){if(1===s.beginColumn&&this.currentBlockLevel>0&&0===this.currentQuoteLevel)return!1;i++}while(s.kind===this.tm.GT||s.kind===this.tm.SPACE||s.kind===this.tm.TAB);if(i>this.currentQuoteLevel)return!0;if(i<this.currentQuoteLevel)return!1}while(s.kind===this.tm.EOL);return s.kind!==this.tm.EOF&&(0===this.currentBlockLevel||s.beginColumn>=t+2)}return!1},multilineAhead:function(t){if(this.getNextTokenKind()===t&&this.getToken(2).kind!==t&&this.getToken(2).kind!==this.tm.EOL)for(var i=2;;i++){var s=this.getToken(i);if(s.kind===t)return!0;if(s.kind===this.tm.EOL){i=this.skip(i+1,[this.tm.SPACE,this.tm.TAB]);var e=this.newQuoteLevel(i);if(e!==this.currentQuoteLevel)return!1;if(i=this.skip(i,[this.tm.SPACE,this.tm.TAB,this.tm.GT]),this.getToken(i).kind===t||this.getToken(i).kind===this.tm.EOL||this.getToken(i).kind===this.tm.DASH||this.getToken(i).kind===this.tm.DIGITS&&this.getToken(i+1).kind===this.tm.DOT||this.getToken(i).kind===this.tm.BACKTICK&&this.getToken(i+1).kind===this.tm.BACKTICK&&this.getToken(i+2).kind===this.tm.BACKTICK||this.headingAhead(i))return!1}else if(s.kind===this.tm.EOF)return!1}return!1},fencesAhead:function(){if(this.getNextTokenKind()===this.tm.EOL){var t=this.skip(2,[this.tm.SPACE,this.tm.TAB,this.tm.GT]);if(this.getToken(t).kind===this.tm.BACKTICK&&this.getToken(t+1).kind===this.tm.BACKTICK&&this.getToken(t+2).kind===this.tm.BACKTICK)return t=this.skip(t+3,[this.tm.SPACE,this.tm.TAB]),this.getToken(t).kind===this.tm.EOL||this.getToken(t).kind===this.tm.EOF}return!1},headingAhead:function(t){if(this.getToken(t).kind===this.tm.EQ)for(var i=1,s=t+1;;s++){if(this.getToken(s).kind!==this.tm.EQ)return!0;if(++i>6)return!1}return!1},listItemAhead:function(t,i){if(this.getNextTokenKind()===this.tm.EOL)for(var s=1,e=2;;e++){var n=this.getToken(e);if(n.kind===this.tm.EOL&&++s>2)return!1;if(n.kind!==this.tm.SPACE&&n.kind!==this.tm.TAB&&n.kind!==this.tm.GT&&n.kind!==this.tm.EOL)return i?n.kind===this.tm.DIGITS&&this.getToken(e+1).kind===this.tm.DOT&&n.beginColumn>=t:n.kind===this.tm.DASH&&n.beginColumn>=t}return!1},textAhead:function(){if(this.getNextTokenKind()===this.tm.EOL&&this.getToken(2).kind!==this.tm.EOL){var t=this.skip(2,[this.tm.SPACE,this.tm.TAB]),i=this.newQuoteLevel(t);if(i===this.currentQuoteLevel||!this.modules.indexOf("blockquotes")>=0){t=this.skip(t,[this.tm.SPACE,this.tm.TAB,this.tm.GT]);var s=this.getToken(t);return!(this.getToken(t).kind===this.tm.EOL||this.modules.indexOf("lists")>=0&&s.kind===this.tm.DASH||this.modules.indexOf("lists")>=0&&s.kind===this.tm.DIGITS&&this.getToken(t+1).kind===this.tm.DOT||this.getToken(t).kind===this.tm.BACKTICK&&this.getToken(t+1).kind===this.tm.BACKTICK&&this.getToken(t+2).kind===this.tm.BACKTICK||this.modules.indexOf("headings")>=0&&this.headingAhead(t))}}return!1},nextAfterSpace:function(t){var i=this.skip(1,[this.tm.SPACE,this.tm.TAB]);return t.indexOf(this.getToken(i).kind)>=0},newQuoteLevel:function(t){for(var i=0,s=t;;s++){var e=this.getToken(s);if(e.kind===this.tm.GT)i++;else if(e.kind!==this.tm.SPACE&&e.kind!==this.tm.TAB)return i}},skip:function(t,i){for(var s=t;;s++){var e=this.getToken(s);if(-1===i.indexOf(e.kind)||e.kind===this.tm.EOF)return s}},hasOrderedListAhead:function(){this.lookAhead=2,this.lastPosition=this.scanPosition=this.token;try{return!this.scanToken(this.tm.DIGITS)&&!this.scanToken(this.tm.DOT)}catch(t){return!0}},hasFencedCodeBlockAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanFencedCodeBlock()}catch(t){return!0}},headingHasInlineElementsAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{var t=this.scanPosition;return this.scanTextTokens()&&(this.scanPosition=t,this.scanImage()&&(this.scanPosition=t,this.scanLink()&&(this.scanPosition=t,this.scanStrong()&&(this.scanPosition=t,this.scanEm()&&(this.scanPosition=t,this.scanCode()&&(this.scanPosition=t,this.scanLooseChar()))))))?!1:!0}catch(i){return!0}},hasTextAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanTextTokens()}catch(t){return!0}},hasImageAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanImage()}catch(t){return!0}},blockQuoteHasEmptyLineAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanBlockQuoteEmptyLine()}catch(t){return!0}},hasStrongAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanStrong()}catch(t){return!0}},hasEmAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanEm()}catch(t){return!0}},hasCodeAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanCode()}catch(t){return!0}},blockQuoteHasAnyBlockElementseAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanMoreBlockElements()}catch(t){return!0}},hasBlockQuoteEmptyLinesAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanBlockQuoteEmptyLines()}catch(t){return!0}},listItemHasInlineElements:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanMoreBlockElements()}catch(t){return!0}},hasInlineTextAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanTextTokens()}catch(t){return!0}},hasInlineElementAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanInlineElement()}catch(t){return!0}},imageHasAnyElements:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanImageElement()}catch(t){return!0}},hasResourceTextAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanResourceElements()}catch(t){return!0}},linkHasAnyElements:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanLinkElement()}catch(t){return!0}},hasResourceUrlAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanResourceUrl()}catch(t){return!0}},resourceHasElementAhead:function(){this.lookAhead=2,this.lastPosition=this.scanPosition=this.token;try{return!this.scanResourceElement()}catch(t){return!0}},resourceTextHasElementsAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanResourceTextElement()}catch(t){return!0}},hasEmWithinStrongMultiline:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanEmWithinStrongMultiline()}catch(t){return!0}},strongMultilineHasElementsAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanStrongMultilineElements()}catch(t){return!0}},strongWithinEmMultilineHasElementsAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanStrongWithinEmMultilineElements()}catch(t){return!0}},hasImage:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanImage()}catch(t){return!0}},hasLinkAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanLink()}catch(t){return!0}},strongEmWithinStrongAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanEmWithinStrong()}catch(t){return!0}},strongHasElements:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanStrongElements()}catch(t){return!0}},strongWithinEmHasElementsAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanStrongWithinEmElements()}catch(t){return!0}},hasStrongWithinEmMultilineAhead:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanStrongWithinEmMultiline()}catch(t){return!0}},emMultilineContentHasElementsAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanEmMultilineContentElements()}catch(t){return!0}},emWithinStrongMultilineContentHasElementsAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanEmWithinStrongMultilineContent()}catch(t){return!0}},emHasStrongWithinEm:function(){this.lookAhead=2147483647,this.lastPosition=this.scanPosition=this.token;try{return!this.scanStrongWithinEm()}catch(t){return!0}},emHasElements:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanEmElements()}catch(t){return!0}},emWithinStrongHasElementsAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanEmWithinStrongElements()}catch(t){return!0}},codeTextHasAnyTokenAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanCodeTextTokens()}catch(t){return!0}},textHasTokensAhead:function(){this.lookAhead=1,this.lastPosition=this.scanPosition=this.token;try{return!this.scanText()}catch(t){return!0}},scanLooseChar:function(){var t=this.scanPosition;return this.scanToken(this.tm.ASTERISK)&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK)&&(this.scanPosition=t,this.scanToken(this.tm.LBRACK)))?(this.scanPosition=t,this.scanToken(this.tm.UNDERSCORE)):!1},scanText:function(){var t=this.scanPosition;return this.scanToken(this.tm.BACKSLASH)&&(this.scanPosition=t,this.scanToken(this.tm.CHAR_SEQUENCE)&&(this.scanPosition=t,this.scanToken(this.tm.COLON)&&(this.scanPosition=t,this.scanToken(this.tm.DASH)&&(this.scanPosition=t,this.scanToken(this.tm.DIGITS)&&(this.scanPosition=t,this.scanToken(this.tm.DOT)&&(this.scanPosition=t,this.scanToken(this.tm.EQ)&&(this.scanPosition=t,this.scanToken(this.tm.ESCAPED_CHAR)&&(this.tm.scanPosition=t,this.scanToken(this.tm.GT)&&(this.scanPosition=t,this.scanToken(this.tm.IMAGE_LABEL)&&(this.scanPosition=t,this.scanToken(this.tm.LPAREN)&&(this.scanPosition=t,this.scanToken(this.tm.LT)&&(this.scanPosition=t,this.scanToken(this.tm.RBRACK)&&(this.scanPosition=t,this.scanToken(this.tm.RPAREN))))))))))))))?(this.scanPosition=t,this.lookingAhead=!0,this.semanticLookAhead=!this.nextAfterSpace([this.tm.EOL,this.tm.EOF]),this.lookingAhead=!1,!this.semanticLookAhead||this.scanWhitspaceToken()):!1},scanTextTokens:function(){var t=null;if(this.scanText())return!0;for(;;)if(t=this.scanPosition,this.scanText()){this.scanPosition=t;break}return!1},scanCodeTextTokens:function(){var t=this.scanPosition;return this.scanToken(this.tm.ASTERISK)&&(this.scanPosition=t,this.scanToken(this.tm.BACKSLASH)&&(this.scanPosition=t,this.scanToken(this.tm.CHAR_SEQUENCE)&&(this.scanPosition=t,this.scanToken(this.tm.COLON)&&(this.scanPosition=t,this.scanToken(this.tm.DASH)&&(this.scanPosition=t,this.scanToken(this.tm.DIGITS)&&(this.scanPosition=t,this.scanToken(this.tm.DOT)&&(this.scanPosition=t,this.scanToken(this.tm.EQ)&&(this.scanPosition=t,this.scanToken(this.tm.ESCAPED_CHAR)&&(this.scanPosition=t,this.scanToken(this.tm.IMAGE_LABEL)&&(this.scanPosition=t,this.scanToken(this.tm.LT)&&(this.scanPosition=t,this.scanToken(this.tm.LBRACK)&&(this.scanPosition=t,this.scanToken(this.tm.RBRACK)&&(this.scanPosition=t,this.scanToken(this.tm.LPAREN)&&(this.scanPosition=t,this.scanToken(this.tm.GT)&&(this.scanPosition=t,this.scanToken(this.tm.RPAREN)&&(this.scanPosition=t,this.scanToken(this.tm.UNDERSCORE)))))))))))))))))?(this.scanPosition=t,this.lookingAhead=!0,this.semanticLookAhead=!this.nextAfterSpace([this.tm.EOL,this.tm.EOF]),this.lookingAhead=!1,!this.semanticLookAhead||this.scanWhitspaceToken()):!1},scanCode:function(){return this.scanToken(this.tm.BACKTICK)||this.scanCodeTextTokensAhead()||this.scanToken(this.tm.BACKTICK)},scanCodeMultiline:function(){var t=null;if(scanToken(this.tm.BACKTICK)||this.scanCodeTextTokensAhead())return!0;for(;;)if(t=this.scanPosition,this.hasCodeTextOnNextLineAhead()){this.scanPosition=t;break}return this.scanToken(BACKTICK)},scanCodeTextTokensAhead:function(){var t=null;if(this.scanCodeTextTokens())return!0;for(;;)if(t=this.scanPosition,this.scanCodeTextTokens()){this.scanPosition=t;break}return!1},hasCodeTextOnNextLineAhead:function(){var t=null;if(this.scanWhitespaceTokenBeforeEol())return!0;for(;;)if(t=this.scanPosition,this.scanToken(this.tm.GT)){this.scanPosition=t;break}return this.scanCodeTextTokensAhead()},scanWhitspaceTokens:function(){for(var t=null;;)if(t=this.scanPosition,this.scanWhitspaceToken()){this.scanPosition=t;break}return!1},scanWhitespaceTokenBeforeEol:function(){return this.scanWhitspaceTokens()||this.scanToken(this.tm.EOL)},scanEmWithinStrongElements:function(){var t=this.scanPosition;return this.scanTextTokens()&&(this.scanPosition=t,this.scanImage()&&(this.scanPosition=t,this.scanLink()&&(this.scanPosition=t,this.scanCode()&&(this.scanPosition=t,this.scanToken(this.tm.ASTERISK)&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK))))))?(this.scanPosition=t,this.scanToken(this.tm.LBRACK)):!1},scanEmWithinStrong:function(){var t=null;if(this.scanToken(this.tm.UNDERSCORE)||this.scanEmWithinStrongElements())return!0;for(;;)if(t=this.scanPosition,this.scanEmWithinStrongElements()){this.scanPosition=t;break}return this.scanToken(this.tm.UNDERSCORE)},scanEmElements:function(){var t=this.scanPosition;return this.scanTextTokens()&&(this.scanPosition=t,this.scanImage()&&(this.scanPosition=t,this.scanLink()&&(this.scanPosition=t,this.scanCode()&&(this.scanPosition=t,this.scanStrongWithinEm()&&(this.scanPosition=t,this.scanToken(this.tm.ASTERISK)&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK)))))))?(this.scanPosition=t,this.scanToken(this.tm.LBRACK)):!1},scanEm:function(){var t=null;if(this.scanToken(this.tm.UNDERSCORE)||this.scanEmElements())return!0;for(;;)if(t=this.scanPosition,this.scanEmElements()){this.scanPosition=t;break}return this.scanToken(this.tm.UNDERSCORE)},scanEmWithinStrongMultilineContent:function(){var t=this.scanPosition;return this.scanTextTokens()&&(this.scanPosition=t,this.scanImage()&&(this.scanPosition=t,this.scanLink()&&(this.scanPosition=t,this.scanCode()&&(this.scanPosition=t,this.scanToken(this.tm.ASTERISK)&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK))))))?(this.scanPosition=t,this.scanToken(this.tm.LBRACK)):!1},hasNoEmWithinStrongMultilineContentAhead:function(){var t=null;if(this.scanEmWithinStrongMultilineContent())return!0;for(;;)if(t=this.scanPosition,this.scanEmWithinStrongMultilineContent()){this.scanPosition=t;break}return!1},scanEmWithinStrongMultiline:function(){var t=null;if(this.scanToken(this.tm.UNDERSCORE)||this.hasNoEmWithinStrongMultilineContentAhead())return!0;for(;;)if(t=this.scanPosition,this.scanWhitespaceTokenBeforeEol()||this.hasNoEmWithinStrongMultilineContentAhead()){this.scanPosition=t;break}return this.scanToken(this.tm.UNDERSCORE)},scanEmMultilineContentElements:function(){var t=this.scanPosition;return this.scanTextTokens()&&(this.scanPosition=t,this.scanImage()&&(this.scanPosition=t,this.scanLink()&&(this.scanPosition=t,this.lookingAhead=!0,this.semanticLookAhead=this.multilineAhead(this.tm.BACKTICK),this.lookingAhead=!1,(!this.semanticLookAhead||this.scanCodeMultiline())&&(this.scanPosition=t,this.scanStrongWithinEmMultiline()&&(this.scanPosition=t,this.scanToken(this.tm.ASTERISK)&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK)))))))?(this.scanPosition=t,this.scanToken(this.tm.LBRACK)):!1},scanStrongWithinEmElements:function(){var t=this.scanPosition;return this.scanTextTokens()&&(this.scanPosition=t,this.scanImage()&&(this.scanPosition=t,this.scanLink()&&(this.scanPosition=t,this.scanCode()&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK)&&(this.scanPosition=t,this.scanToken(this.tm.LBRACK))))))?(this.scanPosition=t,this.scanToken(this.tm.UNDERSCORE)):!1},scanStrongWithinEm:function(){var t=null;if(this.scanToken(this.tm.ASTERISK)||this.scanStrongWithinEmElements())return!0;for(;;)if(t=this.scanPosition,this.scanStrongWithinEmElements()){this.scanPosition=t;break}return this.scanToken(this.tm.ASTERISK)},scanStrongElements:function(){var t=this.scanPosition;return this.scanTextTokens()&&(this.scanPosition=t,this.scanImage()&&(this.scanPosition=t,this.scanLink()&&(this.scanPosition=t,this.lookingAhead=!0,this.semanticLookAhead=this.multilineAhead(this.tm.BACKTICK),this.lookingAhead=!1,(!this.semanticLookAhead||this.scanCodeMultiline())&&(this.scanPosition=t,this.scanEmWithinStrong()&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK)&&(this.scanPosition=t,this.scanToken(this.tm.LBRACK)))))))?(this.scanPosition=t,this.scanToken(this.tm.UNDERSCORE)):!1},scanStrong:function(){var t=null;if(this.scanToken(this.tm.ASTERISK)||this.scanStrongElements())return!0;for(;;)if(t=this.scanPosition,this.scanStrongElements()){this.scanPosition=t;break}return this.scanToken(this.tm.ASTERISK)},scanStrongWithinEmMultilineElements:function(){var t=this.scanPosition;return this.scanTextTokens()&&(this.scanPosition=t,this.scanImage()&&(this.scanPosition=t,this.scanLink()&&(this.scanPosition=t,this.scanCode()&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK)&&(this.scanPosition=t,this.scanToken(this.tm.LBRACK))))))?(this.scanPosition=t,this.scanToken(this.tm.UNDERSCORE)):!1},scanForMoreStrongWithinEmMultilineElements:function(){var t=null;if(this.scanStrongWithinEmMultilineElements())return!0;for(;;)if(t=this.scanPosition,this.scanStrongWithinEmMultilineElements()){this.scanPosition=t;break}return!1},scanStrongWithinEmMultiline:function(){var t=null;if(this.scanToken(this.tm.ASTERISK)||this.scanForMoreStrongWithinEmMultilineElements())return!0;for(;;)if(t=this.scanPosition,this.scanWhitespaceTokenBeforeEol()||this.scanForMoreStrongWithinEmMultilineElements()){this.scanPosition=t;break}return this.scanToken(this.tm.ASTERISK)},scanStrongMultilineElements:function(){var t=this.scanPosition;return this.scanTextTokens()&&(this.scanPosition=t,this.scanImage()&&(this.scanPosition=t,this.scanLink()&&(this.scanPosition=t,this.scanCode()&&(this.scanPosition=t,this.scanEmWithinStrongMultiline()&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK)&&(this.scanPosition=t,this.scanToken(this.tm.LBRACK)))))))?(this.scanPosition=t,this.scanToken(this.tm.UNDERSCORE)):!1},scanResourceTextElement:function(){var t=this.scanPosition;return this.scanToken(this.tm.ASTERISK)&&(this.scanPosition=t,this.scanToken(this.tm.BACKSLASH)&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK)&&(this.scanPosition=t,this.scanToken(this.tm.CHAR_SEQUENCE)&&(this.scanPosition=t,this.scanToken(this.tm.COLON)&&(this.scanPosition=t,this.scanToken(this.tm.DASH)&&(this.scanPosition=t,this.scanToken(this.tm.DIGITS)&&(this.scanPosition=t,this.scanToken(this.tm.DOT)&&(this.scanPosition=t,this.scanToken(this.tm.EQ)&&(this.scanPosition=t,this.scanToken(this.tm.ESCAPED_CHAR)&&(this.scanPosition=t,this.scanToken(this.tm.IMAGE_LABEL)&&(this.scanPosition=t,this.scanToken(this.tm.GT)&&(this.scanPosition=t,this.scanToken(this.tm.LBRACK)&&(this.scanPosition=t,this.scanToken(this.tm.LPAREN)&&(this.scanPosition=t,this.scanToken(this.tm.LT)&&(this.scanPosition=t,this.scanToken(this.tm.RBRACK)&&(this.scanPosition=t,this.scanToken(this.tm.UNDERSCORE)))))))))))))))))?(this.scanPosition=t,this.lookingAhead=!0,this.semanticLookAhead=!this.nextAfterSpace([this.tm.RPAREN]),this.lookingAhead=!1,!this.semanticLookAhead||this.scanWhitspaceToken()):!1},scanImageElement:function(){var t=this.scanPosition;return this.scanResourceElements()&&(this.scanPosition=t,this.scanLooseChar())?!0:!1},scanResourceTextElements:function(){for(var t=null;;)if(t=this.scanPosition,this.scanResourceTextElement()){this.scanPosition=t;break}return!1},scanResourceUrl:function(){return this.scanToken(this.tm.LPAREN)||this.scanWhitspaceTokens()||this.scanResourceTextElements()||this.scanWhitspaceTokens()||this.scanToken(this.tm.RPAREN)},scanLinkElement:function(){var t=this.scanPosition;return this.scanImage()&&(this.scanPosition=t,this.scanStrong()&&(this.scanPosition=t,this.scanEm()&&(this.scanPosition=t,this.scanCode()&&(this.scanPosition=t,this.scanResourceElements()))))?(this.scanPosition=t,this.scanLooseChar()):!1},scanResourceElement:function(){var t=this.scanPosition;return this.scanToken(this.tm.BACKSLASH)&&(this.scanPosition=t,this.scanToken(this.tm.COLON)&&(this.scanPosition=t,this.scanToken(this.tm.CHAR_SEQUENCE)&&(this.scanPosition=t,this.scanToken(this.tm.DASH)&&(this.scanPosition=t,this.scanToken(this.tm.DIGITS)&&(this.scanPosition=t,this.scanToken(this.tm.DOT)&&(this.scanPosition=t,this.scanToken(this.tm.EQ)&&(this.scanPosition=t,this.scanToken(this.tm.ESCAPED_CHAR)&&(this.scanPosition=t,this.scanToken(this.tm.IMAGE_LABEL)&&(this.scanPosition=t,this.scanToken(this.tm.GT)&&(this.scanPosition=t,this.scanToken(this.tm.LPAREN)&&(this.scanPosition=t,this.scanToken(this.tm.LT)&&(this.scanPosition=t,this.scanToken(this.tm.RPAREN)))))))))))))?(this.scanPosition=t,this.lookingAhead=!0,this.semanticLookAhead=!this.nextAfterSpace([this.tm.RBRACK]),this.lookingAhead=!1,!this.semanticLookAhead||this.scanWhitspaceToken()):!1},scanResourceElements:function(){var t=null;if(this.scanResourceElement())return!0;for(;;)if(t=this.scanPosition,this.scanResourceElement()){this.scanPosition=t;break}return!1},scanLink:function(){var t=null;if(this.scanToken(this.tm.LBRACK)||this.scanWhitspaceTokens()||this.scanLinkElement())return!0;for(;;)if(t=this.scanPosition,this.scanLinkElement()){this.scanPosition=t;break}return this.scanWhitspaceTokens()||this.scanToken(this.tm.RBRACK)?!0:(t=this.scanPosition,this.scanResourceUrl()&&(this.scanPosition=t),!1)},scanImage:function(){var t=null;if(this.scanToken(this.tm.LBRACK)||this.scanWhitspaceTokens()||this.scanToken(this.tm.IMAGE_LABEL)||this.scanImageElement())return!0;for(;;)if(t=this.scanPosition,this.scanImageElement()){this.scanPosition=t;break}return this.scanWhitspaceTokens()||this.scanToken(this.tm.RBRACK)?!0:(t=this.scanPosition,this.scanResourceUrl()&&(this.scanPosition=t),!1)},scanInlineElement:function(){var t=this.scanPosition;return!this.scanTextTokens()||(this.scanPosition=t,!this.scanImage()||(this.scanPosition=t,!this.scanLink()||(this.scanPosition=t,this.lookingAhead=!0,this.semanticLookAhead=this.multilineAhead(this.tm.ASTERISK),this.lookingAhead=!1,this.semanticLookAhead&&!this.scanToken(this.tm.ASTERISK)||(this.scanPosition=t,this.lookingAhead=!0,this.semanticLookAhead=this.multilineAhead(this.tm.UNDERSCORE),this.lookingAhead=!1,this.semanticLookAhead&&!this.scanToken(this.tm.UNDERSCORE)||(this.scanPosition=t,this.lookingAhead=!0,this.semanticLookAhead=this.multilineAhead(this.tm.BACKTICK),this.lookingAhead=!1,this.semanticLookAhead&&!this.scanCodeMultiline())))))?!1:(this.scanPosition=t,this.scanLooseChar())},scanParagraph:function(){var t=null;if(this.scanInlineElement())return!0;for(;;)if(t=this.scanPosition,this.scanInlineElement()){this.scanPosition=t;break}return!1},scanForCodeLanguageElement:function(){var t=this.scanPosition;return this.scanToken(this.tm.CHAR_SEQUENCE)&&(this.scanPosition=t,this.scanToken(this.tm.BACKTICK))?!0:!1},scanForCodeLanguageElements:function(){var t=null;if(this.scanForCodeLanguageElement())return!0;for(;;)if(t=this.scanPosition,this.scanForCodeLanguageElement()){this.scanPosition=t;break}return!1},scanWhitspaceToken:function(){var t=this.scanPosition;return this.scanToken(this.tm.SPACE)&&(this.scanPosition=t,this.scanToken(this.tm.TAB))?!0:!1},scanFencedCodeBlock:function(){var t=null;if(this.scanToken(this.tm.BACKTICK)||this.scanToken(this.tm.BACKTICK)||this.scanToken(this.tm.BACKTICK))return!0;for(;;)if(t=this.scanPosition,this.scanToken(this.tm.BACKTICK)){this.scanPosition=t;break}return this.scanWhitspaceTokens()?!0:(t=this.scanPosition,this.scanForCodeLanguageElements()&&(this.scanPosition=t),t=this.scanPosition,(this.scanToken(this.tm.EOL)||this.scanWhitspaceTokens())&&(this.scanPosition=t),!1)},scanBlockQuoteEmptyLines:function(){return this.scanBlockQuoteEmptyLine()||this.scanToken(this.tm.EOL)},scanBlockQuoteEmptyLine:function(){var t=null;if(this.scanToken(this.tm.EOL)||this.scanWhitspaceTokens()||this.scanToken(this.tm.GT)||this.scanWhitspaceTokens())return!0;for(;;)if(t=this.scanPosition,this.scanToken(this.tm.GT)||this.scanWhitspaceTokens()){this.scanPosition=t;break}return!1},scanForHeadersigns:function(){var t=null;if(this.scanToken(this.tm.EQ))return!0;for(;;)if(t=this.scanPosition,this.scanToken(this.tm.EQ)){this.scanPosition=t;break}return!1},scanMoreBlockElements:function(){var t=this.scanPosition;return this.lookingAhead=!0,this.semanticLookAhead=this.headingAhead(1),this.lookingAhead=!1,
(!this.semanticLookAhead||this.scanForHeadersigns())&&(this.scanPosition=t,this.scanToken(this.tm.GT)&&(this.scanPosition=t,this.scanToken(this.tm.DASH)&&(this.scanPosition=t,(this.scanToken(this.tm.DIGITS)||this.scanToken(this.tm.DOT))&&(this.scanPosition=t,this.scanFencedCodeBlock()))))?(this.scanPosition=t,this.scanParagraph()):!1},scanToken:function(t){if(this.scanPosition===this.lastPosition?(this.lookAhead--,this.scanPosition.next?this.lastPosition=this.scanPosition=this.scanPosition.next:this.lastPosition=this.scanPosition=this.scanPosition.next=this.tm.getNextToken()):this.scanPosition=this.scanPosition.next,this.scanPosition.kind!==t)return!0;if(0===this.lookAhead&&this.scanPosition===this.lastPosition)throw this.lookAheadSuccess;return!1},getNextTokenKind:function(){return-1!==this.nextTokenKind?this.nextTokenKind:(this.nextToken=this.token.next)?this.nextTokenKind=this.nextToken.kind:(this.token.next=this.tm.getNextToken(),this.nextTokenKind=this.token.next.kind)},consumeToken:function(t){return old=this.token,null!==this.token.next?this.token=this.token.next:this.token=this.token.next=this.tm.getNextToken(),this.nextTokenKind=-1,this.token.kind===t?this.token:(this.token=old,this.token)},getToken:function(i){t=this.lookingAhead?this.scanPosition:this.token;for(var s=0;i>s;s++)t.next?t=t.next:t=t.next=this.tm.getNextToken();return t}},i.Document=e,i.Parser=K,i.StringReader=p,i.Html5Renderer=L}("undefined"==typeof exports?this.koara={}:exports);