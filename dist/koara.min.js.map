{"version":3,"sources":["app.js","charstream.js","stringreader.js"],"names":["koara","exports","nodeType","root","module","CharStream","reader","this","available","bufsize","tokenBegin","bufcolumn","bufpos","bufline","column","line","prevCharIsLF","buffer","maxNextCharInd","inBuf","tabSize","prototype","beginToken","c","readChar","fillBuff","updateLineColumn","i","read","e","backup","amount","getImage","slice","join","getBeginColumn","getBeginLine","getEndColumn","getEndLine","StringReader","text","index","offset","length","substr","charactersRead"],"mappings":"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","file":"koara.min.js","sourcesContent":["var koara = {}\n\nif (typeof exports != 'undefined' && !exports.nodeType) {\n  if (typeof module != 'undefined' && !module.nodeType && module.exports) {\n    exports = module.exports = koara;\n  }\n  exports.koara = koara;\n} else {\n  root.koara = koara;\n}","koara.CharStream = function(reader) {\n\tthis.available = 4096;\n\tthis.bufsize = 4096;\n\tthis.tokenBegin = 0;\n\tthis.bufcolumn = [];\n\tthis.bufpos = -1;\n\tthis.bufline = [];\n\tthis.column = 0;\n\tthis.line = 1;\n\tthis.prevCharIsLF;\n\tthis.reader = reader;\n\tthis.buffer = [];\n\tthis.maxNextCharInd = 0;\n\tthis.inBuf = 0;\n\tthis.tabSize = 4;\n}\n\nkoara.CharStream.prototype.beginToken = function() {\n\tthis.tokenBegin = -1;\n\tvar c = this.readChar();\n\tthis.tokenBegin = this.bufpos;\n\treturn c;\n}\n\nkoara.CharStream.prototype.readChar = function() {\n\tif (this.inBuf > 0) {\n\t\t--this.inBuf;\n\t\tif (++this.bufpos == this.bufsize) {\n\t\t\tthis.bufpos = 0;\n\t\t}\n\t\treturn this.buffer[this.bufpos];\n\t}\n\tif (++this.bufpos >= this.maxNextCharInd) {\n\t\tthis.fillBuff();\n\t}\n\tvar c = this.buffer[this.bufpos];\n\tthis.updateLineColumn(c);\n\treturn c;\n}\n\nkoara.CharStream.prototype.fillBuff = function() {\n\tif (this.maxNextCharInd == this.available) {\n\t\tif (this.available == this.bufsize) {\n\t\t\tthis.bufpos = 0;\n\t\t\tthis.maxNextCharInd = 0;\n\t\t\tif (this.tokenBegin > 2048) {\n\t\t\t\tthis.available = this.tokenBegin;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.available = this.bufsize;\n\t\t}\n\t}\n\tvar i;\n\n\ttry {\n\t\tif ((i = this.reader.read(this.buffer, this.maxNextCharInd,\n\t\t\t\tthis.available - this.maxNextCharInd)) == -1) {\n\t\t\tthrow \"IOException\";\n\t\t} else {\n\t\t\tthis.maxNextCharInd += i;\n\t\t}\n\t} catch (e) {\n\t\t--this.bufpos;\n\t\tthis.backup(0);\n\t\tif (this.tokenBegin == -1) {\n\t\t\tthis.tokenBegin = this.bufpos;\n\t\t}\n\t\tthrow e;\n\t}\n}\n\nkoara.CharStream.prototype.backup = function(amount) {\n\tthis.inBuf += this.amount;\n\tif ((this.bufpos -= this.amount) < 0) {\n\t\tthis.bufpos += this.bufsize;\n\t}\n}\n\nkoara.CharStream.prototype.updateLineColumn = function(c) {\n\tthis.column++;\n\tif (this.prevCharIsLF) {\n\t\tthis.prevCharIsLF = false;\n\t\tthis.column = 1;\n\t\tthis.line += this.column;\n\t}\n\n\tswitch (c) {\n\tcase '\\n':\n\t\tthis.prevCharIsLF = true;\n\t\tbreak;\n\tcase '\\t':\n\t\tthis.column--;\n\t\tthis.column += this.tabSize - this.column % this.tabSize;\n\t\tbreak;\n\t}\n\tthis.bufline[this.bufpos] = this.line;\n\tthis.bufcolumn[this.bufpos] = this.column;\n}\n\nkoara.CharStream.prototype.getImage = function() {\n\tif (this.bufpos >= this.tokenBegin) {\n\t\treturn this.buffer.slice(this.tokenBegin, this.bufpos - this.tokenBegin + 1).join('');\n\t} else {\n\t\treturn this.buffer.slice(this.tokenBegin, this.bufsize - this.tokenBegin).join('')\n\t\t\t\t+ this.buffer.slice(0, this.bufpos + 1).join('');\n\t}\n}\n\nkoara.CharStream.prototype.getBeginColumn = function() {\n\treturn this.bufpos in this.bufcolumn ? this.bufcolumn[this.bufpos] : 0;\n}\n\nkoara.CharStream.prototype.getBeginLine = function() {\n\treturn this.bufpos in this.bufline ? this.bufline[this.bufpos] : 0;\n}\n\nkoara.CharStream.prototype.getEndColumn = function() {\n\treturn this.tokenBegin in this.bufcolumn ? this.bufcolumn[this.tokenBegin] : 0;\n}\n\nkoara.CharStream.prototype.getEndLine = function() {\n\treturn this.tokenBegin in this.bufline ? this.bufline[this.tokenBegin] : 0;\n}","'use strict';\n\nkoara.StringReader = function(text) {\n\tthis.index = 0;\n\tthis.text = text;\n}\n\nkoara.StringReader.prototype.read = function(buffer, offset, length) {\n\tif(this.text.substr(this.index).length > 0) {\n\t\tvar charactersRead = 0;\n\t\tfor(var i=0; i < length; i++) {\n\t\t\tvar c = this.text.substr(this.index + i, 1);\n\t\t\tif(c !== '') {\n\t\t\t\tbuffer[offset + i] = c;\n\t\t\t\tcharactersRead++;\n\t\t\t}\n\t\t}\n\t\tthis.index += length;\n\t\treturn charactersRead;\n\t}\n\treturn -1;\n}"],"sourceRoot":"/source/"}